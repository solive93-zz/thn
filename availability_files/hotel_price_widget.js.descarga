!function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var r,n,o,i,s=(r=Object.prototype.toString,n=function(t){return"function"==typeof t||"[object Function]"===r.call(t)},o=Math.pow(2,53)-1,i=function(t){var e=function(t){var e=Number(t);return isNaN(e)?0:0!==e&&isFinite(e)?(e>0?1:-1)*Math.floor(Math.abs(e)):e}(t);return Math.min(Math.max(e,0),o)},function(t){var e=this,r=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var o,s=arguments.length>1?arguments[1]:void 0;if(void 0!==s){if(!n(s))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(o=arguments[2])}for(var a,c=i(r.length),u=n(e)?Object(new e(c)):new Array(c),l=0;l<c;)a=r[l],u[l]=s?void 0===o?s(a,l):s.call(o,a,l):a,l+=1;return u.length=c,u});function a(){this.parentNode.removeChild(this)}var c=function(){var t=function(t){return new RegExp("(^| )"+t+"( |$)")},e=function(t,e,r){for(var n=0;n<t.length;n++)e.call(r,t[n])};function r(t){this.element=t}return r.prototype={add:function(){e(arguments,(function(t){this.contains(t)||(this.element.className+=this.element.className.length>0?" "+t:t)}),this)},remove:function(){e(arguments,(function(e){this.element.className=this.element.className.replace(t(e),"")}),this)},toggle:function(t){return this.contains(t)?(this.remove(t),!1):(this.add(t),!0)},contains:function(e){return t(e).test(this.element.className)},replace:function(t,e){this.remove(t),this.add(e)}},r}();for(var u=null,l=[Object,Function,Number],f=0;null===u&&f<l.length;)u=l[f].prototype.toString,-1===String(u).indexOf("native")&&(u=null,f+=1);var h=Function.prototype.toString,p=/^\[object .+?Constructor\]$/,d=RegExp("^"+String(u).replace(/[.*+?^${}()|[\]\/\\]/g,"\\$&").replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),y=null===u?function(t){return!0}:function(e){var r=t(e);return"function"==r?d.test(h.call(e)):e&&"object"==r&&p.test(u.call(e))||!1},m=Math.pow(2,53)-1;var v="object"==("undefined"==typeof global?"undefined":t(global))&&global&&global.Object===Object&&global,_="object"==("undefined"==typeof self?"undefined":t(self))&&self&&self.Object===Object&&self,b=v||_||Function("return this")(),g=b.document;function w(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var r=g.createEvent("CustomEvent");return r.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),r}w.prototype=b.Event&&b.Event.prototype;var E=function(){var e=setTimeout;function r(){}function n(e){if("object"!==t(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(e,this)}function o(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,n._immediateFn((function(){var r=1===t._state?e.onFulfilled:e.onRejected;if(null!==r){var n;try{n=r(t._value)}catch(t){return void s(e.promise,t)}i(e.promise,n)}else(1===t._state?i:s)(e.promise,t._value)}))):t._deferreds.push(e)}function i(e,r){try{if(r===e)throw new TypeError("A promise cannot be resolved with itself.");if(r&&("object"===t(r)||"function"==typeof r)){var o=r.then;if(r instanceof n)return e._state=3,e._value=r,void a(e);if("function"==typeof o)return void u((i=o,c=r,function(){i.apply(c,arguments)}),e)}e._state=1,e._value=r,a(e)}catch(t){s(e,t)}var i,c}function s(t,e){t._state=2,t._value=e,a(t)}function a(t){2===t._state&&0===t._deferreds.length&&n._immediateFn((function(){t._handled||n._unhandledRejectionFn(t._value)}));for(var e=0,r=t._deferreds.length;e<r;e++)o(t,t._deferreds[e]);t._deferreds=null}function c(t,e,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=r}function u(t,e){var r=!1;try{t((function(t){r||(r=!0,i(e,t))}),(function(t){r||(r=!0,s(e,t))}))}catch(t){if(r)return;r=!0,s(e,t)}}return n.prototype.catch=function(t){return this.then(null,t)},n.prototype.then=function(t,e){var n=new this.constructor(r);return o(this,new c(t,e,n)),n},n.all=function(e){var r=Array.prototype.slice.call(e);return new n((function(e,n){if(0===r.length)return e([]);var o=r.length;function i(s,a){try{if(a&&("object"===t(a)||"function"==typeof a)){var c=a.then;if("function"==typeof c)return void c.call(a,(function(t){i(s,t)}),n)}r[s]=a,0==--o&&e(r)}catch(t){n(t)}}for(var s=0;s<r.length;s++)i(s,r[s])}))},n.resolve=function(e){return e&&"object"===t(e)&&e.constructor===n?e:new n((function(t){t(e)}))},n.reject=function(t){return new n((function(e,r){r(t)}))},n.race=function(t){return new n((function(e,r){for(var n=0,o=t.length;n<o;n++)t[n].then(e,r)}))},n._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){e(t,0)},n._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},n._setImmediateFn=function(t){n._immediateFn=t},n._setUnhandledRejectionFn=function(t){n._unhandledRejectionFn=t},n}();var S=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")},j=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(t){return S()}try{return __global__||S()}finally{delete Object.prototype.__global__}}(),O="object"!=typeof globalThis||!globalThis||globalThis.Array!==Array?j:globalThis,P={object:!0,symbol:!0};var x=void 0;function T(t){return t!==x&&null!==t}var A={object:!0,function:!0,undefined:!0};function R(t){if(!function(t){return!!T(t)&&hasOwnProperty.call(A,typeof t)}(t))return!1;try{return!!t.constructor&&t.constructor.prototype===t}catch(t){return!1}}var C=/^\s*class[\s{/}]/,L=Function.prototype.toString;function U(t){return!!function(t){if("function"!=typeof t)return!1;if(!hasOwnProperty.call(t,"length"))return!1;try{if("number"!=typeof t.length)return!1;if("function"!=typeof t.call)return!1;if("function"!=typeof t.apply)return!1}catch(t){return!1}return!R(t)}(t)&&!C.test(L.call(t))}var I=void 0;function F(t){return t!==I&&null!==t}var k=Object.keys;var B=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}()?Object.keys:function(t){return k(F(t)?Object(t):t)};var q=Math.max;var N=function(){var t,e=Object.assign;return"function"==typeof e&&(e(t={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}()?Object.assign:function(t,e){var r,n,o,i=q(arguments.length,2);for(t=Object(function(t){if(!F(t))throw new TypeError("Cannot use null or undefined");return t}(t)),o=function(n){try{t[n]=e[n]}catch(t){r||(r=t)}},n=1;n<i;++n)e=arguments[n],B(e).forEach(o);if(void 0!==r)throw r;return t},D=Array.prototype.forEach,M=Object.create,z=function(t,e){var r;for(r in t)e[r]=t[r]};function J(t){var e=M(null);return D.call(arguments,(function(t){F(t)&&z(Object(t),e)})),e}var $="razdwatrzy";var H=String.prototype.indexOf;var V="function"==typeof $.contains&&!0===$.contains("dwa")&&!1===$.contains("foo")?String.prototype.contains:function(t){return H.call(this,t,arguments[1])>-1},G=function(t,e){var r,n,o,i,s;return arguments.length<2||"string"!=typeof t?(i=e,e=t,t=null):i=arguments[2],T(t)?(r=V.call(t,"c"),n=V.call(t,"e"),o=V.call(t,"w")):(r=o=!0,n=!1),s={value:e,configurable:r,enumerable:n,writable:o},i?N(J(i),s):s};function X(t){if(!function(t){return!!t&&("symbol"==typeof t||!!t.constructor&&("Symbol"===t.constructor.name&&"Symbol"===t[t.constructor.toStringTag]))}(t))throw new TypeError(t+" is not a symbol");return t}G.gs=function(t,e,r){var n,o,i,s;return"string"!=typeof t?(i=r,r=e,e=t,t=null):i=arguments[3],T(e)?U(e)?T(r)?U(r)||(i=r,r=void 0):r=void 0:(i=e,e=r=void 0):e=void 0,T(t)?(n=V.call(t,"c"),o=V.call(t,"e")):(n=!0,o=!1),s={get:e,set:r,configurable:n,enumerable:o},i?N(J(i),s):s};var K=Object.create,W=Object.defineProperty,Q=Object.prototype,Y=K(null);function Z(t){for(var e,r,n=0;Y[t+(n||"")];)++n;return Y[t+=n||""]=!0,W(Q,e="@@"+t,G.gs(null,(function(t){r||(r=!0,W(this,e,G(t)),r=!1)}))),e}var tt=O.Symbol;var et=Object.create(null);var rt,nt,ot,it=O.Symbol,st=Object.create,at=Object.defineProperties,ct=Object.defineProperty;if("function"==typeof it)try{String(it()),ot=!0}catch(t){}else it=null;nt=function(t){if(this instanceof nt)throw new TypeError("Symbol is not a constructor");return rt(t)};var ut=rt=function t(e){var r;if(this instanceof t)throw new TypeError("Symbol is not a constructor");return ot?it(e):(r=st(nt.prototype),e=void 0===e?"":String(e),at(r,{__description__:G("",e),__name__:G("",Z(e))}))};!function(t){Object.defineProperties(t,{hasInstance:G("",tt&&tt.hasInstance||t("hasInstance")),isConcatSpreadable:G("",tt&&tt.isConcatSpreadable||t("isConcatSpreadable")),iterator:G("",tt&&tt.iterator||t("iterator")),match:G("",tt&&tt.match||t("match")),replace:G("",tt&&tt.replace||t("replace")),search:G("",tt&&tt.search||t("search")),species:G("",tt&&tt.species||t("species")),split:G("",tt&&tt.split||t("split")),toPrimitive:G("",tt&&tt.toPrimitive||t("toPrimitive")),toStringTag:G("",tt&&tt.toStringTag||t("toStringTag")),unscopables:G("",tt&&tt.unscopables||t("unscopables"))})}(rt),function(t){Object.defineProperties(t,{for:G((function(e){return et[e]?et[e]:et[e]=t(String(e))})),keyFor:G((function(t){var e;for(e in X(t),et)if(et[e]===t)return e}))})}(rt),at(nt.prototype,{constructor:G(rt),toString:G("",(function(){return this.__name__}))}),at(rt.prototype,{toString:G((function(){return"Symbol ("+X(this).__description__+")"})),valueOf:G((function(){return X(this)}))}),ct(rt.prototype,rt.toPrimitive,G("",(function(){var t=X(this);return"symbol"==typeof t?t:t.toString()}))),ct(rt.prototype,rt.toStringTag,G("c","Symbol")),ct(nt.prototype,rt.toStringTag,G("c",rt.prototype[rt.toStringTag])),ct(nt.prototype,rt.toPrimitive,G("c",rt.prototype[rt.toPrimitive])),function(){var t,e=O.Symbol;if("function"!=typeof e)return!1;t=e("test symbol");try{String(t)}catch(t){return!1}return!!P[typeof e.iterator]&&(!!P[typeof e.toPrimitive]&&!!P[typeof e.toStringTag])}()||Object.defineProperty(O,"Symbol",{value:ut,configurable:!0,enumerable:!1,writable:!0}),function(t){var e=function(){try{return!!Symbol.iterator}catch(t){return!1}}(),r=function(t){var r={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e&&(r[Symbol.iterator]=function(){return r}),r},n=function(t){return encodeURIComponent(t).replace(/%20/g,"+")},o=function(t){return decodeURIComponent(String(t).replace(/\+/g," "))};(function(){try{var e=t.URLSearchParams;return"a=1"===new e("?a=1").toString()&&"function"==typeof e.prototype.set}catch(t){return!1}})()||function(){var o=function(t){Object.defineProperty(this,"_entries",{writable:!0,value:{}});var e=typeof t;if("undefined"===e);else if("string"===e)""!==t&&this._fromString(t);else if(t instanceof o){var r=this;t.forEach((function(t,e){r.append(e,t)}))}else{if(null===t||"object"!==e)throw new TypeError("Unsupported input's type for URLSearchParams");if("[object Array]"===Object.prototype.toString.call(t))for(var n=0;n<t.length;n++){var i=t[n];if("[object Array]"!==Object.prototype.toString.call(i)&&2===i.length)throw new TypeError("Expected [string, any] as entry at index "+n+" of URLSearchParams's input");this.append(i[0],i[1])}else for(var s in t)t.hasOwnProperty(s)&&this.append(s,t[s])}},i=o.prototype;i.append=function(t,e){t in this._entries?this._entries[t].push(String(e)):this._entries[t]=[String(e)]},i.delete=function(t){delete this._entries[t]},i.get=function(t){return t in this._entries?this._entries[t][0]:null},i.getAll=function(t){return t in this._entries?this._entries[t].slice(0):[]},i.has=function(t){return t in this._entries},i.set=function(t,e){this._entries[t]=[String(e)]},i.forEach=function(t,e){var r;for(var n in this._entries)if(this._entries.hasOwnProperty(n)){r=this._entries[n];for(var o=0;o<r.length;o++)t.call(e,r[o],n,this)}},i.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),r(t)},i.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),r(t)},i.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),r(t)},e&&(i[Symbol.iterator]=i.entries),i.toString=function(){var t=[];return this.forEach((function(e,r){t.push(n(r)+"="+n(e))})),t.join("&")},t.URLSearchParams=o}();var i=t.URLSearchParams.prototype;"function"!=typeof i.sort&&(i.sort=function(){var t=this,e=[];this.forEach((function(r,n){e.push([n,r]),t._entries||t.delete(n)})),e.sort((function(t,e){return t[0]<e[0]?-1:t[0]>e[0]?1:0})),t._entries&&(t._entries={});for(var r=0;r<e.length;r++)this.append(e[r][0],e[r][1])}),"function"!=typeof i._fromString&&Object.defineProperty(i,"_fromString",{enumerable:!1,configurable:!1,writable:!1,value:function(t){if(this._entries)this._entries={};else{var e=[];this.forEach((function(t,r){e.push(r)}));for(var r=0;r<e.length;r++)this.delete(e[r])}var n,i=(t=t.replace(/^\?/,"")).split("&");for(r=0;r<i.length;r++)n=i[r].split("="),this.append(o(n[0]),n.length>1?o(n[1]):"")}})}("undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0),function(t){if(function(){try{var e=new t.URL("b","http://a");return e.pathname="c d","http://a/c%20d"===e.href&&e.searchParams}catch(t){return!1}}()||function(){var e=t.URL,r=function(e,r){"string"!=typeof e&&(e=String(e));var n,o=document;if(r&&(void 0===t.location||r!==t.location.href)){(n=(o=document.implementation.createHTMLDocument("")).createElement("base")).href=r,o.head.appendChild(n);try{if(0!==n.href.indexOf(r))throw new Error(n.href)}catch(t){throw new Error("URL unable to set base "+r+" due to "+t)}}var i=o.createElement("a");i.href=e,n&&(o.body.appendChild(i),i.href=i.href);var s=o.createElement("input");if(s.type="url",s.value=e,":"===i.protocol||!/:/.test(i.href)||!s.checkValidity()&&!r)throw new TypeError("Invalid URL");Object.defineProperty(this,"_anchorElement",{value:i});var a=new t.URLSearchParams(this.search),c=!0,u=!0,l=this;["append","delete","set"].forEach((function(t){var e=a[t];a[t]=function(){e.apply(a,arguments),c&&(u=!1,l.search=a.toString(),u=!0)}})),Object.defineProperty(this,"searchParams",{value:a,enumerable:!0});var f=void 0;Object.defineProperty(this,"_updateSearchParams",{enumerable:!1,configurable:!1,writable:!1,value:function(){this.search!==f&&(f=this.search,u&&(c=!1,this.searchParams._fromString(this.search),c=!0))}})},n=r.prototype;["hash","host","hostname","port","protocol"].forEach((function(t){!function(t){Object.defineProperty(n,t,{get:function(){return this._anchorElement[t]},set:function(e){this._anchorElement[t]=e},enumerable:!0})}(t)})),Object.defineProperty(n,"search",{get:function(){return this._anchorElement.search},set:function(t){this._anchorElement.search=t,this._updateSearchParams()},enumerable:!0}),Object.defineProperties(n,{toString:{get:function(){var t=this;return function(){return t.href}}},href:{get:function(){return this._anchorElement.href.replace(/\?$/,"")},set:function(t){this._anchorElement.href=t,this._updateSearchParams()},enumerable:!0},pathname:{get:function(){return this._anchorElement.pathname.replace(/(^\/?)/,"/")},set:function(t){this._anchorElement.pathname=t},enumerable:!0},origin:{get:function(){var t={"http:":80,"https:":443,"ftp:":21}[this._anchorElement.protocol],e=this._anchorElement.port!=t&&""!==this._anchorElement.port;return this._anchorElement.protocol+"//"+this._anchorElement.hostname+(e?":"+this._anchorElement.port:"")},enumerable:!0},password:{get:function(){return""},set:function(t){},enumerable:!0},username:{get:function(){return""},set:function(t){},enumerable:!0}}),r.createObjectURL=function(t){return e.createObjectURL.apply(e,arguments)},r.revokeObjectURL=function(t){return e.revokeObjectURL.apply(e,arguments)},t.URL=r}(),void 0!==t.location&&!("origin"in t.location)){var e=function(){return t.location.protocol+"//"+t.location.hostname+(t.location.port?":"+t.location.port:"")};try{Object.defineProperty(t.location,"origin",{get:e,enumerable:!0})}catch(r){setInterval((function(){t.location.origin=e()}),100)}}}("undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0);var lt={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(lt.arrayBuffer)var ft=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],ht=ArrayBuffer.isView||function(t){return t&&ft.indexOf(Object.prototype.toString.call(t))>-1};function pt(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function dt(t){return"string"!=typeof t&&(t=String(t)),t}function yt(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return lt.iterable&&(e[Symbol.iterator]=function(){return e}),e}function mt(t){this.map={},t instanceof mt?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function vt(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function _t(t){return new Promise((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function bt(t){var e=new FileReader,r=_t(e);return e.readAsArrayBuffer(t),r}function gt(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function wt(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:lt.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:lt.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:lt.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():lt.arrayBuffer&&lt.blob&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=gt(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):lt.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||ht(t))?this._bodyArrayBuffer=gt(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):lt.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},lt.blob&&(this.blob=function(){var t=vt(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?vt(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(bt)}),this.text=function(){var t,e,r,n=vt(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,r=_t(e),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},lt.formData&&(this.formData=function(){return this.text().then(jt)}),this.json=function(){return this.text().then(JSON.parse)},this}mt.prototype.append=function(t,e){t=pt(t),e=dt(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},mt.prototype.delete=function(t){delete this.map[pt(t)]},mt.prototype.get=function(t){return t=pt(t),this.has(t)?this.map[t]:null},mt.prototype.has=function(t){return this.map.hasOwnProperty(pt(t))},mt.prototype.set=function(t,e){this.map[pt(t)]=dt(e)},mt.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},mt.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),yt(t)},mt.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),yt(t)},mt.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),yt(t)},lt.iterable&&(mt.prototype[Symbol.iterator]=mt.prototype.entries);var Et=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function St(t,e){var r,n,o=(e=e||{}).body;if(t instanceof St){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new mt(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new mt(e.headers)),this.method=(r=e.method||this.method||"GET",n=r.toUpperCase(),Et.indexOf(n)>-1?n:r),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function jt(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(o))}})),e}function Ot(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new mt(e.headers),this.url=e.url||"",this._initBody(t)}St.prototype.clone=function(){return new St(this,{body:this._bodyInit})},wt.call(St.prototype),wt.call(Ot.prototype),Ot.prototype.clone=function(){return new Ot(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new mt(this.headers),url:this.url})},Ot.error=function(){var t=new Ot(null,{status:0,statusText:""});return t.type="error",t};var Pt=[301,302,303,307,308];Ot.redirect=function(t,e){if(-1===Pt.indexOf(e))throw new RangeError("Invalid status code");return new Ot(null,{status:e,headers:{location:t}})};var xt=self.DOMException;try{new xt}catch(t){(xt=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack}).prototype=Object.create(Error.prototype),xt.prototype.constructor=xt}function Tt(t,e){return new Promise((function(r,n){var o=new St(t,e);if(o.signal&&o.signal.aborted)return n(new xt("Aborted","AbortError"));var i=new XMLHttpRequest;function s(){i.abort()}i.onload=function(){var t,e,n={status:i.status,statusText:i.statusText,headers:(t=i.getAllResponseHeaders()||"",e=new mt,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var r=t.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();e.append(n,o)}})),e)};n.url="responseURL"in i?i.responseURL:n.headers.get("X-Request-URL");var o="response"in i?i.response:i.responseText;r(new Ot(o,n))},i.onerror=function(){n(new TypeError("Network request failed"))},i.ontimeout=function(){n(new TypeError("Network request failed"))},i.onabort=function(){n(new xt("Aborted","AbortError"))},i.open(o.method,o.url,!0),"include"===o.credentials?i.withCredentials=!0:"omit"===o.credentials&&(i.withCredentials=!1),"responseType"in i&&lt.blob&&(i.responseType="blob"),o.headers.forEach((function(t,e){i.setRequestHeader(e,t)})),o.signal&&(o.signal.addEventListener("abort",s),i.onreadystatechange=function(){4===i.readyState&&o.signal.removeEventListener("abort",s)}),i.send(void 0===o._bodyInit?null:o._bodyInit)}))}Tt.polyfill=!0,self.fetch||(self.fetch=Tt,self.Headers=mt,self.Request=St,self.Response=Ot),Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.MAX_SAFE_INTEGER||(Number.MAX_SAFE_INTEGER=m),Array.from||(Array.from=s),"function"!=typeof Object.assign&&(Object.assign=function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),n=1;n<arguments.length;n++){var o=arguments[n];if(null!=o)for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}return r}),Function.prototype.bind&&y(Function.prototype.bind)||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),r=this,n=function(){},o=function(){return r.apply(this instanceof n?this:t,e.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(n.prototype=this.prototype),o.prototype=new n,o}),[window.Element.prototype,window.CharacterData.prototype,window.DocumentType.prototype].forEach((function(t){t.remove=t.remove||a})),window.Element.prototype.matches||(window.Element.prototype.matches=window.Element.prototype.matchesSelector||window.Element.prototype.mozMatchesSelector||window.Element.prototype.msMatchesSelector||window.Element.prototype.oMatchesSelector||window.Element.prototype.webkitMatchesSelector||matches),"classList"in window.Element.prototype||Object.defineProperty(window.Element.prototype,"classList",{get:function(){return new c(this)}}),window.DOMTokenList&&null==window.DOMTokenList.prototype.replace&&(window.DOMTokenList.prototype.replace=c.prototype.replace),window.Element&&!window.Element.prototype.closest&&(window.Element.prototype.closest=function(t){var e,r=(this.document||this.ownerDocument).querySelectorAll(t),n=this;do{for(e=r.length;--e>=0&&r.item(e)!==n;);}while(e<0&&(n=n.parentElement));return n}),"function"!=typeof window.CustomEvent&&(window.CustomEvent=w),void 0===Function.prototype.name&&void 0!==Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){var t=/function\s([^(]{1,})\(/.exec(this.toString());return t&&t.length>1?t[1].trim():""},set:function(t){}}),window.Promise||(window.Promise=E);var At={},Rt={exports:At};!function(t){function e(t,r){var n;r=r||{},this._id=e._generateUUID(),this._promise=r.promise||Promise,this._frameId=r.frameId||"CrossStorageClient-"+this._id,this._origin=e._getOrigin(t),this._requests={},this._connected=!1,this._closed=!1,this._count=0,this._timeout=r.timeout||5e3,this._listener=null,this._installListener(),r.frameId&&(n=document.getElementById(r.frameId)),n&&this._poll(),n=n||this._createFrame(t),this._hub=n.contentWindow}e.frameStyle={display:"none",position:"absolute",top:"-999px",left:"-999px"},e._getOrigin=function(t){var e;return(e=document.createElement("a")).href=t,e.host||(e=window.location),((e.protocol&&":"!==e.protocol?e.protocol:window.location.protocol)+"//"+e.host).replace(/:80$|:443$/,"")},e._generateUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))},e.prototype.onConnect=function(){var t=this;return this._connected?this._promise.resolve():this._closed?this._promise.reject(new Error("CrossStorageClient has closed")):(this._requests.connect||(this._requests.connect=[]),new this._promise((function(e,r){var n=setTimeout((function(){r(new Error("CrossStorageClient could not connect"))}),t._timeout);t._requests.connect.push((function(t){if(clearTimeout(n),t)return r(t);e()}))})))},e.prototype.set=function(t,e){return this._request("set",{key:t,value:e})},e.prototype.get=function(t){var e=Array.prototype.slice.call(arguments);return this._request("get",{keys:e})},e.prototype.del=function(){var t=Array.prototype.slice.call(arguments);return this._request("del",{keys:t})},e.prototype.clear=function(){return this._request("clear")},e.prototype.getKeys=function(){return this._request("getKeys")},e.prototype.close=function(){var t=document.getElementById(this._frameId);t&&t.parentNode.removeChild(t),window.removeEventListener?window.removeEventListener("message",this._listener,!1):window.detachEvent("onmessage",this._listener),this._connected=!1,this._closed=!0},e.prototype._installListener=function(){var t=this;this._listener=function(e){var r,n,o;if(!t._closed&&e.data&&"string"==typeof e.data&&("null"===e.origin?"file://":e.origin)===t._origin)if("cross-storage:unavailable"!==e.data){if(-1!==e.data.indexOf("cross-storage:")&&!t._connected){if(t._connected=!0,!t._requests.connect)return;for(r=0;r<t._requests.connect.length;r++)t._requests.connect[r](n);delete t._requests.connect}if("cross-storage:ready"!==e.data){try{o=JSON.parse(e.data)}catch(t){return}o.id&&t._requests[o.id]&&t._requests[o.id](o.error,o.result)}}else{if(t._closed||t.close(),!t._requests.connect)return;for(n=new Error("Closing client. Could not access localStorage in hub."),r=0;r<t._requests.connect.length;r++)t._requests.connect[r](n)}},window.addEventListener?window.addEventListener("message",this._listener,!1):window.attachEvent("onmessage",this._listener)},e.prototype._poll=function(){var t,e,r;r="file://"===(t=this)._origin?"*":t._origin,e=setInterval((function(){if(t._connected)return clearInterval(e);t._hub&&t._hub.postMessage("cross-storage:poll",r)}),1e3)},e.prototype._createFrame=function(t){var r,n;for(n in(r=window.document.createElement("iframe")).id=this._frameId,e.frameStyle)e.frameStyle.hasOwnProperty(n)&&(r.style[n]=e.frameStyle[n]);return window.document.body.appendChild(r),r.src=t,r},e.prototype._request=function(t,e){var r,n;return this._closed?this._promise.reject(new Error("CrossStorageClient has closed")):((n=this)._count++,r={id:this._id+":"+n._count,method:"cross-storage:"+t,params:e},new this._promise((function(t,e){var o,i,s;o=setTimeout((function(){n._requests[r.id]&&(delete n._requests[r.id],e(new Error("Timeout: could not perform "+r.method)))}),n._timeout),n._requests[r.id]=function(i,s){if(clearTimeout(o),delete n._requests[r.id],i)return e(new Error(i));t(s)},Array.prototype.toJSON&&(i=Array.prototype.toJSON,Array.prototype.toJSON=null),s="file://"===n._origin?"*":n._origin,n._hub.postMessage(JSON.stringify(r),s),i&&(Array.prototype.toJSON=i)})))},void 0!==Rt&&Rt.exports?Rt.exports=e:void 0!==At?At.CrossStorageClient=e:"function"==typeof define&&define.amd?define([],(function(){return e})):t.CrossStorageClient=e}(void 0);var Ct=Rt.exports;function Lt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e={},r=!1;return t.forEach((function(t){e[t]=b[t],delete b[t]})),function(){r||(t.forEach((function(t){b[t]=e[t]})),r=!0)}}function Ut(){var t=b.__thn_script_src&&{src:b.__thn_script_src}||b.document.currentScript||Array.from(b.document.getElementsByTagName("script")).filter((function(t){return"interactive"===t.readyState})).pop()||Array.from(b.document.querySelectorAll('script[src*="thehotelsnetwork.com/js/hotel_price_widget.js"]')).pop();return delete b.__thn_script_src,t}var It=new Promise((function(t,e){var r,n,o,i=!1;function s(){i||(i=!0,o&&clearInterval(o),t())}if(b.document.addEventListener)b.document.addEventListener("DOMContentLoaded",s,!1),b.addEventListener("load",s,!1);else if(b.attachEvent){b.attachEvent("onload",s),n=b.document.createElement("div");try{r=null===b.frameElement}catch(t){}n.doScroll&&r&&b.external&&(o=setInterval((function(){try{n.doScroll(),s()}catch(t){}}),30))}"complete"===b.document.readyState&&s()})),Ft=function(){return It},kt={environment:"production"},Bt={production:{environment:"production",hostname:"www.thehotelsnetwork.com",host:"https://www.thehotelsnetwork.com"},staging:{environment:"staging",hostname:"www.stg.thehotelsnetwork.com",host:"https://www.stg.thehotelsnetwork.com"},local:{environment:"local",hostname:"web.thn",host:"https://web.thn"},testing:{environment:"testing",hostname:"127.0.0.1",host:"https://127.0.0.1:8080"},__common__:{minified:!0,office:!1,latest:"3.9"}},qt={};function Nt(t){var e=t.params,r=t.base_url,n=new URL(r||qt.host);return n.pathname="/get_loader_data",Object.keys(e).forEach((function(t){return n.searchParams.set(t,e[t])})),b.fetch(n.toString(),{credentials:"include"}).then((function(t){if(!t.ok)throw Error("".concat(t.status," ").concat(t.statusText));return t.json()}))}function Dt(t){"string"==typeof t&&(t=new URL(t));var e=[t.searchParams.get("property_id"),t.searchParams.get("hotel_id"),t.searchParams.get("account_key"),t.searchParams.get("bahiaprincipe_id"),t.searchParams.get("octorate_id"),t.searchParams.get("partnership_id"),t.searchParams.get("partnership_hotel_id")],r=e[0],n=e[1],o=e[2],i=e[3],s=e[4],a=e[5],c=e[6];if(r)return Promise.resolve({property_id:r});if(n||i||s||a&&c){var u=new URL(t);return u.pathname="/get_hotel_property_rel",b.fetch(u.toString()).then((function(t){if(!t.ok)throw Error("".concat(t.status," ").concat(t.statusText));return t.json()})).then((function(t){var e={};return t&&1===t.result?(t.property_id&&(e.property_id=t.property_id),t.account_key&&(e.account_key=t.account_key),e):e}))}return o?Promise.resolve({account_key:o}):Promise.resolve({})}function Mt(t,e){return e||(e=b.thn&&b.thn.data),!!e&&(t.property_id?t.property_id==e.property_id:!!t.account_key&&(t.account_key==e.account_key&&t.property_id==e.property_id))}!function(){function e(t,e){return(e||"")+" (SystemJS https://git.io/JvFET#"+t+")"}var r,n="undefined"!=typeof Symbol,o="undefined"!=typeof self,i="undefined"!=typeof document,s=o?self:global;if(i){var a=document.querySelector("base[href]");a&&(r=a.href)}if(!r&&"undefined"!=typeof location){var c=(r=location.href.split("#")[0].split("?")[0]).lastIndexOf("/");-1!==c&&(r=r.slice(0,c+1))}var u=/\\/g;function l(t,e){if(-1!==t.indexOf("\\")&&(t=t.replace(u,"/")),"/"===t[0]&&"/"===t[1])return e.slice(0,e.indexOf(":")+1)+t;if("."===t[0]&&("/"===t[1]||"."===t[1]&&("/"===t[2]||2===t.length&&(t+="/"))||1===t.length&&(t+="/"))||"/"===t[0]){var r,n=e.slice(0,e.indexOf(":")+1);if(r="/"===e[n.length+1]?"file:"!==n?(r=e.slice(n.length+2)).slice(r.indexOf("/")+1):e.slice(8):e.slice(n.length+("/"===e[n.length])),"/"===t[0])return e.slice(0,e.length-r.length-1)+t;for(var o=r.slice(0,r.lastIndexOf("/")+1)+t,i=[],s=-1,a=0;a<o.length;a++)-1!==s?"/"===o[a]&&(i.push(o.slice(s,a+1)),s=-1):"."===o[a]?"."!==o[a+1]||"/"!==o[a+2]&&a+2!==o.length?"/"===o[a+1]||a+1===o.length?a+=1:s=a:(i.pop(),a+=2):s=a;return-1!==s&&i.push(o.slice(s)),e.slice(0,e.length-r.length)+i.join("")}}function f(t,e){return l(t,e)||(-1!==t.indexOf(":")?t:l("./"+t,e))}function h(t,e){for(var r in e)t[r]=e[r];return t}function p(t,e,r,n,o){for(var i in t){var s=l(i,r)||i,a=t[i];if("string"==typeof a){var c=v(n,l(a,r)||a,o);c?e[s]=c:m("W1",i,a)}}}function d(t,e){if(e[t])return t;var r=t.length;do{var n=t.slice(0,r+1);if(n in e)return n}while(-1!==(r=t.lastIndexOf("/",r-1)))}function y(t,e){var r=d(t,e);if(r){var n=e[r];if(null===n)return;if(!(t.length>r.length&&"/"!==n[n.length-1]))return n+t.slice(r.length);m("W2",r,n)}}function m(t,r,n,o){console.warn(e(t,[n,r].join(", ")))}function v(t,e,r){for(var n=t.scopes,o=r&&d(r,n);o;){var i=y(e,n[o]);if(i)return i;o=d(o.slice(0,o.lastIndexOf("/")),n)}return y(e,t.imports)||-1!==e.indexOf(":")&&e}var _=n&&Symbol.toStringTag,b=n?Symbol():"@";function g(){this[b]={}}var w,E=g.prototype;E.import=function(r,n){var o=this;return Promise.resolve(o.prepareImport()).then((function(){return o.resolve(r,n)})).then((function(r){var n=function r(n,o,i){var s=n[b][o];if(s)return s;var a=[],c=Object.create(null);_&&Object.defineProperty(c,_,{value:"Module"});var u=Promise.resolve().then((function(){return n.instantiate(o,i)})).then((function(r){if(!r)throw Error(e(2,o));var i=r[1]((function(e,r){s.h=!0;var n=!1;if("object"!==t(e))e in c&&c[e]===r||(c[e]=r,n=!0);else{for(var o in e){r=e[o];o in c&&c[o]===r||(c[o]=r,n=!0)}e.__esModule&&(c.__esModule=e.__esModule)}if(n)for(var i=0;i<a.length;i++)a[i](c);return r}),2===r[1].length?{import:function(t){return n.import(t,o)},meta:n.createContext(o)}:void 0);return s.e=i.execute||function(){},[r[0],i.setters||[]]})),l=u.then((function(t){return Promise.all(t[0].map((function(e,i){var s=t[1][i];return Promise.resolve(n.resolve(e,o)).then((function(t){var e=r(n,t,o);return Promise.resolve(e.I).then((function(){return s&&(e.i.push(s),!e.h&&e.I||s(e.n)),e}))}))}))).then((function(t){s.d=t}))}));return l.catch((function(t){s.e=null,s.er=t})),s=n[b][o]={id:o,i:a,n:c,I:u,L:l,h:!1,d:void 0,e:void 0,er:void 0,E:void 0,C:void 0}}(o,r);return n.C||function(t,e){return e.C=function t(e,r,n){if(!n[r.id])return n[r.id]=!0,Promise.resolve(r.L).then((function(){return Promise.all(r.d.map((function(r){return t(e,r,n)})))}))}(t,e,{}).then((function(){return function t(e,r,n){if(n[r.id])return;if(n[r.id]=!0,!r.e){if(r.er)throw r.er;return r.E?r.E:void 0}var o;return r.d.forEach((function(r){var i;(i=t(e,r,n))&&(o=o||[]).push(i)})),o?Promise.all(o).then(i):i();function i(){try{var t=r.e.call(S);if(t)return t=t.then((function(){r.C=r.n,r.E=null})),r.E=r.E||t;r.C=r.n}catch(t){throw r.er=t,t}finally{r.L=r.I=void 0,r.e=null}}}(t,e,{})})).then((function(){return e.n}))}(o,n)}))},E.createContext=function(t){return{url:t}},E.register=function(t,e){w=[t,e]},E.getRegister=function(){var t=w;return w=void 0,t};var S=Object.freeze(Object.create(null));s.System=new g;var j=n?Symbol():"#",O=n?Symbol():"$";function P(t,e){i&&[].forEach.call(document.querySelectorAll('script[type="systemjs-importmap"]'+e),t)}P((function(t){t._t=fetch(t.src).then((function(t){return t.text()}))}),"[src]"),E.prepareImport=function(){var t=this;return t[O]||(t[j]={imports:{},scopes:{}},t[O]=Promise.resolve(),P((function(n){t[O]=t[O].then((function(){return(n._t||n.src&&fetch(n.src).then((function(t){return t.text()}))||Promise.resolve(n.innerHTML)).then((function(t){try{return JSON.parse(t)}catch(t){throw Error(e(1))}})).then((function(e){t[j]=function(t,e,r){var n={imports:h({},r.imports),scopes:h({},r.scopes)};if(t.imports&&p(t.imports,n.imports,e,r,null),t.scopes)for(var o in t.scopes){var i=f(o,e);p(t.scopes[o],n.scopes[i]||(n.scopes[i]={}),e,r,i)}return n}(e,n.src||r,t[j])}))}))}),"")),t[O]},E.resolve=function(t,n){return n=n||r,v(this[j],l(t,n)||t,n)||function(t,r){throw Error(e(8,[t,r].join(", ")))}(t,n)};var x,T,A=E.register;function R(){[].forEach.call(document.querySelectorAll("script[type=systemjs-module]"),(function(t){t.src&&System.import("import:"===t.src.slice(0,7)?t.src.slice(7):f(t.src,r))}))}E.register=function(t,e){A.call(this,t,e)},E.createScript=function(t){var e=document.createElement("script");return e.charset="utf-8",e.async=!0,e.crossOrigin="anonymous",e.src=t,e},E.instantiate=function(t,r){var n=this;return new Promise((function(o,i){var s=E.createScript(t);s.addEventListener("error",(function(){i(Error(e(3,[t,r].join(", "))))})),s.addEventListener("load",(function(){document.head.removeChild(s),x===t?i(T):o(n.getRegister())})),document.head.appendChild(s)}))},i&&(window.addEventListener("error",(function(t){x=t.filename,T=t.error})),window.addEventListener("DOMContentLoaded",R),R()),o&&"function"==typeof importScripts&&(E.instantiate=function(t){var e=this;return Promise.resolve().then((function(){return importScripts(t),e.getRegister()}))})}(),function(t){var e=t.System;a(e);var r,n=e.constructor.prototype,o=e.constructor,i=function(){o.call(this),a(this)};function s(){r=null}function a(t){t.registerRegistry=Object.create(null)}i.prototype=n,e.constructor=i;var c=n.register;n.register=function(t,e,n){if("string"!=typeof t)return c.apply(this,arguments);var o=[e,n];return this.registerRegistry[t]=o,r||(r=o,Promise.resolve().then(s)),c.apply(this,arguments)};var u=n.resolve;n.resolve=function(t,e){return"/"===t[0]||"."===t[0]&&("/"===t[1]||"."===t[1]&&"/"===t[2])?u.call(this,t,e):t in this.registerRegistry?t:u.call(this,t,e)};var l=n.instantiate;n.instantiate=function(t,e){return this.registerRegistry[t]||l.call(this,t,e)};var f=n.getRegister;n.getRegister=function(){return r||f.call(this)}}("undefined"!=typeof self?self:global);var zt="undefined"!=typeof self?self:global,Jt=zt.System;delete zt.System,function(){var t;b.rho&&(b.receive_event=(t={_is_dummy:!0,_original:b.receive_event,_registry:[]},Object.assign((function(){t._registry.push(arguments)}),t)));var r,n={backup_globals:Lt,detect_thn_script:Ut,dom_ready:Ft,get_pid_or_account:Dt,get_loader_data:Nt,is_same_thn_script:Mt},o=kt,i=Ut(),s=function(t){!t||t.message.indexOf("Timeout: ")>-1||t.message.indexOf("CrossStorageClient could not connect")>-1||(b.thn&&b.thn.Sentry?b.thn.Sentry.captureException(t):b.console&&console.error&&console.error(t))},a=function(){var t=new URL(i.src);t.protocol="https:";var s=t.origin,a=b.thn&&b.thn.bottle&&b.thn.bottle.container&&b.thn.bottle.container.has("local_storage")&&b.thn.bottle.container.local_storage||new Ct("".concat(s,"/widget/core/latest/hub/local.html?v=1"));return a.onConnect().then((function(){return a.raw_get?a.raw_get("thn.data._ENV"):a.get("thn.data._ENV")}),(function(){return""})).then((function(e){if(e&&(o=JSON.parse(e)),o.host){var r=new URL(o.host);Object.assign(t,{protocol:r.protocol,host:r.host})}else if(o.hostname)t.host=o.hostname;else if(o.environment&&Bt[o.environment]){var n=new URL(Bt[o.environment].host);Object.assign(t,{protocol:n.protocol,host:n.host})}return Dt(t)})).then((function(e){return Nt({params:e,base_url:t})})).then((function(e){var n=e.data&&e.data.init_thn_data;n&&(e.data.init_thn_data._ENV=o),e._ENV=o,e.script=i;var s=new URL(t.toString().split("?")[0]);return s.pathname="/widget/core/".concat(n&&n.version?n.version:Bt.__common__.latest,"/dist/main/index").concat(void 0===o.minified||o.minified?".min":"",".js"),s.searchParams.set("h",e.checksums&&e.checksums["index.js"]||Date.now()),r=Lt(["filterXSS","filterCSS","DataLayerHelper"]),b.thn||(b.thn={System:Jt}),Promise.all([b.thn.System.import(s.toString()),e])})).then((function(t){var o=e(t,2),i=o[0],c=o[1];r(),r=void 0;var u=i.default;return b.thn=u,u.get_pid_or_account||(Object.assign(u,n),u.systemjs_decorator(Jt),u.bottle.factory("dom_ready",(function(){return Ft})),u.bottle.factory("System",(function(){return Jt})),u.bottle.factory("constructors.CrossStorageClient",(function(){return Ct})),u.bottle.factory("local_storage",(function(){return u.cross_storage_decorator(a)})),u.bottle.factory("session_storage",(function(t){return u.cross_storage_decorator(new t.constructors.CrossStorageClient("".concat(s,"/widget/core/latest/hub/session.html?v=1")))}))),u.bootload(c).then((function(){return Promise.all([u,c])}))})).then((function(r){var n=e(r,2),o=n[0],i=n[1];if(i.data)o.check_identity({loader:i});else{var s=t.searchParams.get("partnership_id")||"";o.check_partnership(s)}}))};b.__thn_script_timer&&clearTimeout(b.__thn_script_timer),b.__thn_script_timer=setTimeout((function(){function t(){Ft().then(a).catch(s)}delete b.__thn_script_timer;try{a().catch(t)}catch(e){t()}}),0)}()}();
