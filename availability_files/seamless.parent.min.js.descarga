var NO_JQUERY={};!function(e,t,n){if(!("console"in e)){var a=e.console={};a.log=a.warn=a.error=a.debug=function(){}}t===NO_JQUERY&&(t={fn:{},extend:function(){for(var e=arguments[0],t=1,n=arguments.length;t<n;t++){var a=arguments[t];for(var s in a)e[s]=a[s]}return e}}),t.fn.pm=function(){return console.log("usage: \nto send:    $.pm(options)\nto receive: $.pm.bind(type, fn, [origin])"),this},t.pm=e.pm=function(e){s.send(e)},t.pm.bind=e.pm.bind=function(e,t,n,a,r){s.bind(e,t,n,a,!0===r)},t.pm.unbind=e.pm.unbind=function(e,t){s.unbind(e,t)},t.pm.origin=e.pm.origin=null,t.pm.poll=e.pm.poll=200;var s={send:function(e){var n=t.extend({},s.defaults,e),a=n.target;if(n.target)if(n.type){var r={data:n.data,type:n.type};n.success&&(r.callback=s._callback(n.success)),n.error&&(r.errback=s._callback(n.error)),"postMessage"in a&&!n.hash?(s._bind(),a.postMessage(JSON.stringify(r),n.origin||"*")):(s.hash._bind(),s.hash.send(n,r))}else console.warn("postmessage type required");else console.warn("postmessage target window required")},bind:function(e,t,n,a,r){s._replyBind(e,t,n,a,r)},_replyBind:function(n,a,r,i,o){"postMessage"in e&&!i?s._bind():s.hash._bind();var l=s.data("listeners.postmessage");l||(l={},s.data("listeners.postmessage",l));var c=l[n];c||(c=[],l[n]=c),c.push({fn:a,callback:o,origin:r||t.pm.origin})},unbind:function(e,t){var n=s.data("listeners.postmessage");if(n)if(e)if(t){var a=n[e];if(a){for(var r=[],i=0,o=a.length;i<o;i++){var l=a[i];l.fn!==t&&r.push(l)}n[e]=r}}else delete n[e];else for(var i in n)delete n[i]},data:function(e,t){return void 0===t?s._data[e]:(s._data[e]=t,t)},_data:{},_CHARS:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),_random:function(){for(var e=[],t=0;t<32;t++)e[t]=s._CHARS[0|32*Math.random()];return e.join("")},_callback:function(e){var t=s.data("callbacks.postmessage");t||(t={},s.data("callbacks.postmessage",t));var n=s._random();return t[n]=e,n},_bind:function(){s.data("listening.postmessage")||(e.addEventListener?e.addEventListener("message",s._dispatch,!1):e.attachEvent&&e.attachEvent("onmessage",s._dispatch),s.data("listening.postmessage",1))},_dispatch:function(e){function t(t){n.callback&&s.send({target:e.source,data:t,type:n.callback})}try{var n=JSON.parse(e.data)}catch(e){return void console.warn("postmessage data invalid json: ",e)}if(n.type){var a=(s.data("callbacks.postmessage")||{})[n.type];if(a)a(n.data);else for(var r=(s.data("listeners.postmessage")||{})[n.type]||[],i=0,o=r.length;i<o;i++){var l=r[i];if(l.origin&&"*"!==l.origin&&e.origin!==l.origin){if(console.warn("postmessage message origin mismatch",e.origin,l.origin),n.errback){var c={message:"postmessage origin mismatch",origin:[e.origin,l.origin]};s.send({target:e.source,data:c,type:n.errback})}}else try{l.callback?l.fn(n.data,t,e):t(l.fn(n.data,e))}catch(t){if(!n.errback)throw t;s.send({target:e.source,data:t,type:n.errback})}}}else console.warn("postmessage message type required")}};s.hash={send:function(t,n){var a=t.target,r=t.url;if(r){r=s.hash._url(r);var i,o=s.hash._url(e.location.href);if(e==a.parent)i="parent";else try{for(var l=0,c=parent.frames.length;l<c;l++)if(parent.frames[l]==e){i=l;break}}catch(t){i=e.name}if(null!=i){var u={"x-requested-with":"postmessage",source:{name:i,url:o},postmessage:n},f="#x-postmessage-id="+s._random();a.location=r+f+encodeURIComponent(JSON.stringify(u))}else console.warn("postmessage windows must be direct parent/child windows and the child must be available through the parent window.frames list")}else console.warn("postmessage target window url is required")},_regex:/^\#x\-postmessage\-id\=(\w{32})/,_regex_len:"#x-postmessage-id=".length+32,_bind:function(){s.data("polling.postmessage")||(setInterval(function(){var t=""+e.location.hash,n=s.hash._regex.exec(t);if(n){var a=n[1];s.hash._last!==a&&(s.hash._last=a,s.hash._dispatch(t.substring(s.hash._regex_len)))}},t.pm.poll||200),s.data("polling.postmessage",1))},_dispatch:function(t){function n(e){a.callback&&s.send({target:i,data:e,type:a.callback,hash:!0,url:t.source.url})}if(t){try{if(!("postmessage"===(t=JSON.parse(decodeURIComponent(t)))["x-requested-with"]&&t.source&&null!=t.source.name&&t.source.url&&t.postmessage))return}catch(e){return}var a=t.postmessage,r=(s.data("callbacks.postmessage")||{})[a.type];if(r)r(a.data);else{var i;i="parent"===t.source.name?e.parent:e.frames[t.source.name];for(var o=(s.data("listeners.postmessage")||{})[a.type]||[],l=0,c=o.length;l<c;l++){var u=o[l];if(u.origin){var f=/https?\:\/\/[^\/]*/.exec(t.source.url)[0];if("*"!==u.origin&&f!==u.origin){if(console.warn("postmessage message origin mismatch",f,u.origin),a.errback){var p={message:"postmessage origin mismatch",origin:[f,u.origin]};s.send({target:i,data:p,type:a.errback,hash:!0,url:t.source.url})}continue}}try{u.callback?u.fn(a.data,n):n(u.fn(a.data))}catch(e){if(!a.errback)throw e;s.send({target:i,data:e,type:a.errback,hash:!0,url:t.source.url})}}}}},_url:function(e){return(""+e).replace(/#.*$/,"")}},t.extend(s,{defaults:{target:null,url:null,type:null,data:null,success:null,error:null,origin:"*",hash:!1}})}(this,"undefined"==typeof jQuery?NO_JQUERY:jQuery),"JSON"in window&&window.JSON||(JSON={}),function(){function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,a,s,r,i,o=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,i=[],"[object Array]"===Object.prototype.toString.apply(l)){for(r=l.length,n=0;n<r;n+=1)i[n]=str(n,l)||"null";return s=0===i.length?"[]":gap?"[\n"+gap+i.join(",\n"+gap)+"\n"+o+"]":"["+i.join(",")+"]",gap=o,s}if(rep&&"object"==typeof rep)for(r=rep.length,n=0;n<r;n+=1)"string"==typeof(a=rep[n])&&(s=str(a,l))&&i.push(quote(a)+(gap?": ":":")+s);else for(a in l)Object.hasOwnProperty.call(l,a)&&(s=str(a,l))&&i.push(quote(a)+(gap?": ":":")+s);return s=0===i.length?"{}":gap?"{\n"+gap+i.join(",\n"+gap)+"\n"+o+"}":"{"+i.join(",")+"}",gap=o,s}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var a;if(gap="",indent="","number"==typeof n)for(a=0;a<n;a+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,a,s=e[t];if(s&&"object"==typeof s)for(n in s)Object.hasOwnProperty.call(s,n)&&(void 0!==(a=walk(s,n))?s[n]=a:delete s[n]);return reviver.call(e,t,s)}var j;if(cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e,t){"use strict";e.SeamlessBase={getElement:function(e){var n="querySelectorAll";0===e.indexOf("#")&&(n="getElementById",e=e.substr(1,e.length));var a=t[n](e);return a&&"querySelectorAll"===n?a[0]:a},elementHeight:function(e){var n=0,a=0;return t.all?(n=e.currentStyle.height,a=parseInt(e.currentStyle.marginTop,10)+parseInt(e.currentStyle.marginBottom,10)):(n=parseInt(t.defaultView.getComputedStyle(e,"").getPropertyValue("height"),10),a=parseInt(t.defaultView.getComputedStyle(e,"").getPropertyValue("margin-top"),10)+parseInt(t.defaultView.getComputedStyle(e,"").getPropertyValue("margin-bottom"),10)),n+a},hasClass:function(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},addClass:function(e,t){e.classList?e.classList.add(t):this.hasClass(e,t)||(e.className+=" "+t)},removeClass:function(e,t){if(e.classList)e.classList.remove(t);else if(this.hasClass(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")}},getParam:function(t,n){n=n||e.location.search;var a="[?&]"+t+"=([^&#]*)",s=new RegExp(a).exec(n);return null===s?"":decodeURIComponent(s[1].replace(/\+/g," "))},filterText:function(e){return e.replace(/[<>]/g,"")},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},setStyle:function(t,n){n.length>0&&(n="string"==typeof n?n:n.join(" "),n=e.SeamlessBase.filterText(n),t.styleSheet?t.styleSheet.cssText=n:t.innerHTML=n)},injectStyles:function(n){var a=this.getElement("style#injected-styles");if(a)e.SeamlessBase.setStyle(a,n);else{var s=t.createElement("style");s.setAttribute("type","text/css"),s.setAttribute("id","injected-styles"),e.SeamlessBase.setStyle(s,n);var r=t.head||t.getElementsByTagName("head")[0];r&&r.appendChild(s)}},injectAppendedStyles:function(e){var n=e.join(";"),a=t.head||t.getElementsByTagName("head")[0],s=t.createElement("style");s.type="text/css",s.styleSheet?s.styleSheet.cssText=n:s.appendChild(t.createTextNode(n)),a.appendChild(s)}}}(window,document),function(e){"use strict";e.SeamlessConnection=function(e,t){this.id=0,this.target=e,this.url=t,this.active=!1,this.queue=[]},e.SeamlessConnection.prototype.send=function(t){this.active&&this.target?((t=t||{}).hasOwnProperty("data")||(t={data:t}),t.target=this.target,t.url=this.url||"index.html",t.type=t.type||"seamless_data",t.data=t.data||{},t.data.__id=this.id,e.pm(t)):this.queue.push(t)},e.SeamlessConnection.prototype.receive=function(t,n){"function"==typeof t&&(n=t,t="seamless_data");var a=this;e.pm.bind(t,function(e,t){return!(!e.__id||e.__id!==a.id)&&n(e,t)})},e.SeamlessConnection.prototype.setActive=function(e){if(this.active=e,this.queue.length>0){for(var t in this.queue)this.send(this.queue[t]);this.queue=[],this.queue.length=0}}}(window),function(e,t,n,a){"use strict";if(e.hasOwnProperty("pm")){e.pm.bind("seamless_noiframe",function(t){t.href=t.href.replace(/noiframe\=[^&?#]+/,""),e.location.replace(t.href)}),e.seamlessOpenFallback=function(t,n,a,s){s.preventDefault?(s.preventDefault(),s.stopPropagation()):s.returnValue=!1,e.open(t,"",["width="+n,"height="+a,"menubar=no","titlebar=no","toolbar=no","status=no","scrollbars=yes","chrome=yes"].join(","))};var s=[],r=!1,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=function(){for(var e=[],t=0;t<32;t++)e[t]=i[0|32*Math.random()];return e.join("")};e.pm.bind("seamless_ready",function(e,t){if(!r){r=!0;for(var n in s)s.hasOwnProperty(n)&&s[n].seamless_ready(e,t);r=!1}}),e.pm.bind("seamless_update",function(e,t){for(var n in s)if(s.hasOwnProperty(n)){var a=s[n];if(a.connection.id===e.__id)return a.seamless_update(e,t)}return e.height=0,e}),e.pm.bind("seamless_error",function(e,t){for(var n in s)s.hasOwnProperty(n)&&s[n].seamless_error(e,t)});var l=function(n){r=!1,s=[];var a={showLoadingIndicator:!0,loading:"Loading ...",spinner:"http://www.travistidwell.com/seamless.js/src/loader.gif",onConnect:null,styles:[],fallback:!0,fallbackParams:"",fallbackText:"",fallbackLinkText:"Click here",fallbackLinkAfter:" to open in a separate window.",fallbackStyles:["padding: 15px","border: 1px solid transparent","border-radius: 4px","color: #3a87ad","background-color: #d9edf7","border-color: #bce8f1"],fallbackLinkStyles:["display: inline-block","color: #333","border: 1px solid #ccc","background-color: #fff","padding: 5px 10px","text-decoration: none","font-size: 12px","line-height: 1.5","border-radius: 6px","font-weight: 400","cursor: pointer","-webkit-user-select: none","-moz-user-select: none","-ms-user-select: none","user-select: none"],fallbackLinkHoverStyles:["background-color:#ebebeb","border-color:#adadad"],fallbackWindowWidth:960,fallbackWindowHeight:800};n=n||{};for(var i in a)n.hasOwnProperty(i)||(n[i]=a[i]);var l=this.length?this[0]:this;l.seamless_options=n,s.push(l);l.getAttribute("name")||l.getAttribute("id");var c=l.getAttribute("src");l.connection=new e.SeamlessConnection(l.contentWindow,c),l.send=function(e){l.connection.send.call(l.connection,e)},l.receive=function(e,t){l.connection.receive.call(l.connection,e,t)};var u={scrolling:"no",seamless:"seamless",width:"100%",height:"0px",marginheight:"0",marginwidth:"0",frameborder:"0",horizontalscrolling:"no",verticalscrolling:"no",style:"border: none; overflow-y: hidden;"};for(var i in u)l.setAttribute(i,u[i]);if(n.showLoadingIndicator){var f=t.createElement("div"),p="background: url("+n.spinner+") no-repeat 10px 13px;";p+="padding: 10px 10px 10px 60px;",p+="width: 100%;",f.setAttribute("style",p);var d=t.createTextNode(n.loading);f.appendChild(d),l.parentNode.insertBefore(f,l)}var g=!0,m=function(){g=!1,void 0!==f&&f.parentNode.removeChild(f)};if(n.fallback){n.fallbackParams&&(c+=-1===c.search(/\?/)?"?":"&",c+=n.fallbackParams);var h=e.SeamlessBase.getElement("#seamless-fallback-styles");if(!h){var b=function(t){return e.SeamlessBase.filterText(t.join(";"))};(h=t.createElement("style")).setAttribute("id","seamless-fallback-styles"),h.setAttribute("type","text/css"),e.SeamlessBase.setStyle(h,".seamless-fallback.seamless-styles {"+b(n.fallbackStyles)+"}.seamless-fallback em { padding: 5px; }.seamless-fallback-link.seamless-styles {"+b(n.fallbackLinkStyles)+"}.seamless-fallback-link.seamless-styles:hover {"+b(n.fallbackLinkHoverStyles)+"}"),l.parentNode.insertBefore(h,l)}var y=['"'+c+'"',n.fallbackWindowWidth,n.fallbackWindowHeight],v=t.createElement("a");v.setAttribute("class","seamless-fallback-link"),v.setAttribute("href","#"),v.setAttribute("onclick","seamlessOpenFallback("+y.join(",")+", event)");var k=t.createElement("div");k.setAttribute("class","seamless-fallback"),k.appendChild(t.createElement("em")),l.parentNode.insertBefore(k,l.nextSibling);var w=function(n,a,s,r){r?(e.SeamlessBase.addClass(k,"seamless-styles"),e.SeamlessBase.addClass(v,"seamless-styles")):(e.SeamlessBase.removeClass(k,"seamless-styles"),e.SeamlessBase.removeClass(v,"seamless-styles"));var i=k.getElementsByTagName("em")[0];i&&(i.innerHTML=e.SeamlessBase.filterText(n)+" ",v.innerHTML=e.SeamlessBase.filterText(a),i.appendChild(v),s&&i.appendChild(t.createTextNode(s)))};n.fallbackText&&w(n.fallbackText,n.fallbackLinkText,n.fallbackLinkAfter,!1),e.onerror=function(){var e="An error has been detected on this page, ";w(e+="which may cause problems with the operation of this application.",n.fallbackLinkText,n.fallbackLinkAfter,!0)},setTimeout(function(){g&&(m(),w("An error has been detected on this page.",n.fallbackLinkText,n.fallbackLinkAfter,!0))},3e4)}return l.seamless_ready=function(t,n){l.connection.id||(l.connection.id=o());var a={id:l.connection.id,styles:l.seamless_options.styles};l.connection.target||(l.connection.target=l[0].contentWindow),e.pm({type:"seamless_connect",target:l.connection.target,url:l.connection.url,data:a,success:function(e){l.seamless_options.onConnect&&l.seamless_options.onConnect(e)}}),l.dispatchEvent(new CustomEvent("connected"))},l.seamless_update=function(e,t){return g&&(m(),l.connection.setActive(!0)),e.height>=0&&(l.style.height=e.height+"px",l.setAttribute("height",e.height+"px")),e},l.seamless_error=function(e,t){m(),l.hide(),w(e.msg,e.linkText,e.afterText,!0)},l};n&&n.fn&&(n.fn.seamless=l),e.seamless=function(e,t){return l.call(e,t)}}else console.log("You must install the postmessage.js module to use seamless.js.")}(window,document,"undefined"==typeof jQuery?{}:jQuery);