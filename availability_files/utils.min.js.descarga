!function($,_){var NS="fastbooking",module="utils",loaded=!1;$.fb=function(type,args,callback){return type=type.replace(/\./,"-"),$.event.trigger({type:type,args:args,callback:callback})};var config={url:"https://www.book-secure.com",path:"/lib/fastbooking/crs/1.0",throwOnAssert:!1,log:{level:3,levels:["emerg","alert","crit","error","warn","notice","info","debug","log"]},libraries:{api:{url:"/api.php"},helper:{useCurrencySymbol:!0,removeDecimalsIfInteger:!0},locale:{},clean:{},validate:{},error:{},verifyHeight:{}},group:null,property:null,currency:"EUR",locale:"en_GB",globalizeLocale:"en-GB"},api={init:function(event){$.fb("crs-checkEvent",event),$.fb("crs-log",{message:"Api main utilities module initialization"}),$.fb("crs-log",{message:"Updating crs-utils-"+module+" configuration."}),config=$.extend(!0,config,event.args||{}),$.fb("crs-log",{m:"Configuration loaded:"}),$.fb("crs-log",{m:config});var step=0,f=[function(){$(document).off("crs-log").on("crs-log",api.log).off("crs-assert").on("crs-assert",api.assert).off("crs-load").on("crs-load",api.load).off("crs-checkEvent").on("crs-checkEvent",api.checkEvent),f[++step]()},function(){$.fb("crs-utils-load",{},function(){f[++step]()})},function(){loaded=!0,$.fb.isLoaded=!0,$fb._triggerEvent("fastbooking-crs-utils-init-done"),"function"==typeof event.callback&&event.callback()}];f[step]()},log:function(event){$.fb("crs-checkEvent",event);var args=event.args||{},level=args.l||args.level||"log",messages=args.messages||[];Array.isArray(messages)||(messages=[messages]);var message=args.m||args.message;if(void 0!==message&&messages.push(message),0<=config.log.level&&window.console){var index=config.log.levels.indexOf(level);if(config.log.level>=index){var c="log";if(-1!==index){switch(index){case 0:case 1:case 2:case 3:c="error";break;case 4:c="warn";break;case 5:c="log";break;case 6:c="info";break;default:c="debug"}if("function"==typeof console[c]){var consoleArgs=[(new Date).getTime().toString(),"["+level+"] >>"].concat(messages);console[c].apply(console,consoleArgs)}}}}return this},load:function(event){$.fb("crs-checkEvent",event);var args=event.args||{},libs=args.libraries||config.libraries;$.fb("crs-log",{messages:["Libraries to load:",libs],l:"info"}),Promise.all([$fb.i18n.selectLocale($fb._state.app.locale),api.loadApiModule(libs.api||config.libraries.api)]).then(function(){var callbackCalled=!1,callback=function(){!callbackCalled&&$.fb("fastbooking-crs-utils-helper-loaded")&&(callbackCalled=!0,api._.callback(event.callback))};_.each(_.omit(libs,"api"),function(initArgs,moduleName){var namespace=NS+"-crs-utils-"+moduleName;eval(namespace.replace(/-/g,"."))?$.fb(namespace+"-loaded")?callback():$.fb(namespace+"-init",initArgs,callback):$.fb("crs-log",{l:"error",message:"Utils library not loaded: "+moduleName})})})},loadApiModule:function(apiInitArgs){return new Promise(function(resolve,reject){var namespace=NS+"-crs-utils-api";if(!eval(namespace.replace(/-/g,".")))return reject(new Error("Utils library not loaded: api"));$.fb(namespace+"-loaded")?resolve():$.fb(namespace+"-init",apiInitArgs,resolve)})},external:function(event){$.fb("crs-checkEvent",event);var src=event.args||null;return $.fb("crs-assert",{c:src,m:"Loading external resource: missing arguments"}),null!==src&&(src.match(/^(https?)?\/\//)||src.match(/^\/\//)||("/"!=src[0]&&(src="/"+src),src=config.url+src),$.ajaxSetup().cache&&config.v&&(src+="?_="+config.v),$.getScript(src).done(function(){api._.callback(event.callback)}).fail(function(){api._.callback(event.callback)})),!0},checkEvent:function(event){return api._.checkEvent(event.args)},assert:function(event){$.fb("crs-checkEvent",event);var args=event.args;return api._.assert(args.c||args.condition,args.m||args.message)},_:{assert:function(condition,message){if(!condition&&(message=message||"Assertion failed",void 0!==name&&(message="["+NS+"] "+message),$.fb("crs-log",{l:"crit",m:message}),config.throwOnAssert))throw new Error(message);return this},log:function(message,level){return level=level||"debug",$.fb("crs-log",{level:level,message:message}),api._},checkEvent:function(event){api._.assert(event instanceof jQuery.Event,"Fastbooking library functions must be called asynchronously through a jQuery trigger method.")},callback:function(event){return void 0===event||("function"==typeof event?event():!event||"function"!=typeof event.callback||event.callback())}}},_default={loaded:function(){return loaded},configure:function(event){$.fb("crs-checkEvent",event);var args=event.args||{},value=void 0!==args.value?args.value:void 0!==args.v?args.v:void 0,key=args.key||args.k||void 0;return void 0===value?config[key]:(config[key]=value,!0)}};for(var i in window[NS]=$.extend(void 0!==window[NS]?window[NS]:{},{crs:{}}),window[NS].crs[module]=$.extend(!0,void 0!==window[NS].crs[module]?window[NS].crs[module]:{},$.extend(!0,_default,api)),window[NS].crs[module])if("function"==typeof window[NS].crs[module][i]){var name=NS+"-crs-"+module+"-"+i+" crs-"+module+"-"+i;$(document).off(name).on(name,window[NS].crs[module][i])}}(window.jQuery,window.$fb.underscore),function($){var NS="fastbooking",loaded=!1,config={url:null,version:"",originalReferer:"",timeOffset:null,token:null,_default:{cache:"false",dataType:"json",type:"POST"},sha512:"/lib/jssha/1.5.0/sha512.min.js",delay:5,timeout:3e4},api={init:function(event){$.fb("crs-checkEvent",event),$.fb("crs-log",{message:"Api module initialization"}),$.fb("crs-log",{message:"Updating crs-utils-api configuration."}),config=$.extend(!0,config,event.args||{}),$.fb("crs-log",{m:"Configuration loaded:"}),$.fb("crs-log",{m:config});var step=0,f=[function(){void 0===window.jsSHA?($.fb("crs-log",{message:"Loading sha512: "+config.sha512}),$.fb("crs-utils-external",config.sha512,function(){$.fb("crs-assert",{c:void 0!==window.jsSHA,m:"Sha512 library loading failed"}),$.fb("crs-log",{message:"sha512 successfully loaded"}),f[++step]()})):f[++step]()},function(){$.fb("crs-api-sync",{success:f[++step]})},function(){loaded=!0,"function"==typeof event.callback&&event.callback()}];f[step]()},sync:function(event){$.fb("crs-checkEvent",event);var args=event.args||{};$.fb("crs-api-call",{data:{_sync:!0},success:function(json){$.fb("crs-assert",{c:json&&"success"==json.status,m:"Api synchronization failed"}),config.token=json.data.token,config.timeOffset=Math.floor((new Date).getTime()/1e3)-json.data.time,"function"==typeof args.success&&args.success()},error:function(){$.fb("crs-log",{l:"crit",m:"Api synchronization failed"}),"function"==typeof args.error&&args.error()}})},call:function(event){$.fb("crs-checkEvent",event),$.fb("crs-assert",{c:void 0!==config.url,m:"Api module configuration error: missing url to request for."}),$.fb("crs-assert",{c:void 0!==window.jsSHA,m:"Api initialization error: missing library sha512."});var args=event.args||{},timestamp=Math.floor((new Date).getTime()/1e3)-config.timeOffset,data={token:new window.jsSHA(timestamp+config.token,"TEXT").getHash("SHA-512","HEX"),json_body:JSON.stringify(args.data||{})},headers=args.headers||{};headers["X-Front-App-Version"]=config.version,headers["X-Original-Referer"]=config.originalReferer,args.data&&args.data._sync&&(data._sync=args.data._sync);var request=$.extend(!0,{},config._default,{url:config.url+"?_"+args.data.c,data:data,headers:headers,success:function(json,unUsed,jqXRH){setTimeout(function(){api._.success(json,jqXRH,args.success)},config.delay)},error:function(json){setTimeout(function(){api._.error(json,args.error)},config.delay)},timeout:config.timeout});return $.fb("crs-log",{m:"Api requesting: "+(args.data.c?args.data.c:"none")}),_state.request=$.ajax(request)},_:{success:function(json,jqXRH,callback){$.fb("crs-log",{m:"Api request success:"}),$.fb("crs-log",{m:json}),"function"==typeof callback&&callback(json,jqXRH)},error:function(json,callback){$.fb("crs-log",{l:"warn",m:"Api request error:"}),$.fb("crs-log",{l:"warn",m:json}),"function"==typeof callback&&callback(json)}}},_state={},_default={loaded:function(){return loaded},configure:function(event){$.fb("crs-checkEvent",event);var args=event.args||{},value=void 0!==args.value?args.value:void 0!==args.v?args.v:void 0,key=args.key||args.k||void 0;return void 0===value?config[key]:(config[key]=value,!0)}};for(var i in window[NS].crs.utils.api=$.extend(!0,void 0!==window[NS].crs.utils.api?window[NS].crs.utils.api:{},$.extend(!0,_default,api)),window[NS].crs.utils.api)if("function"==typeof window[NS].crs.utils.api[i]){var name=NS+"-crs-utils-api-"+i+" crs-api-"+i;$(document).off(name).on(name,window[NS].crs.utils.api[i])}}(window.jQuery),function($,_){var NS="fastbooking",module="locale",loaded=!1,loadedProperties={},lastRequiredLocale=null,config={Globalize:{path:"/lib/globalize/1.0"},locales:{en_GB:"English"},translations:{en_GB:{}},cultures:{},defaultLocale:"en_GB"},api={init:function(event){$.fb("crs-checkEvent",event),$.fb("crs-log",{message:"Locale module initialization"}),$.fb("crs-log",{message:"Updating crs.utils.locale configuration."}),config=$.extend(!0,config,event.args||{}),$.fb("crs-log",{m:"Configuration loaded:"}),$.fb("crs-log",{m:config}),window["_i18n_locale_"+config.defaultLocale]&&(config.translations[config.defaultLocale]=window["_i18n_locale_"+config.defaultLocale]),api._.ensureGlobalizeIsLoaded(function(){config.locales=window._locales,$fb._state.app.data.locales=config.locales,$fb._triggerEvent("fastbooking-crs-frontend-locales-done"),$.fb("crs-locale-set",$.fb("crs-utils-configure",{key:"locale"})||config.defaultLocale),loaded=!0,"function"==typeof event.callback&&event.callback()})},"load-group":function(event){$.fb("crs-checkEvent",event);var group=(event.args||"").group;if($fb._state.app.data.groups[group]&&$fb._state.app.data.groups[group].parameters&&$fb._state.app.data.groups[group].parameters.translations&&$.each($fb._state.app.data.groups[group].parameters.translations,function(locale,trans){void 0===config.translations[locale]&&(config.translations[locale]={}),config.translations[locale][group+":title"]=trans}),"function"==typeof event.callback)return event.callback()},"load-property":function(event){$.fb("crs-checkEvent",event);var args=event.args||"",property=args.property,locale=args.locale||$.fb("crs-utils-configure",{k:"locale"});$.fb("crs-log",{m:"Loading translations for: "+locale+" / "+property}),$.fb("crs-log",{m:loadedProperties}),$.fb("crs-log",{m:property}),$.fb("crs-log",{m:!loadedProperties[locale]});var callback=_.noop;"function"==typeof event.callback&&(callback=event.callback),property&&loadedProperties[locale]&&loadedProperties[locale][property]?callback():api._.loadPropertyTranslations(locale,property).then(function(translationsToSave){api._.savePropertyTranslations(locale,property,translationsToSave)}).then(function(){if(!("en_GB"===locale||loadedProperties.en_GB&&loadedProperties.en_GB[property]))return api._.loadPropertyTranslations("en_GB",property).then(function(englishTranslationsToSave){api._.savePropertyTranslations("en_GB",property,englishTranslationsToSave),callback()});callback()}).catch(function(e){$.fb("crs-log",{l:"crit",m:e.message}),callback()})},set:function(event){$.fb("crs-checkEvent",event);var locale=event.args||$.fb("crs-utils-configure",{k:"locale"});$.fb("crs-assert",{c:void 0!==locale,m:"Locale definition missing"});var GlobalizeLocale=locale.replace("_","-").replace(/_[a-zA-Z]{2}$/,"");"sr-RS"===GlobalizeLocale&&(GlobalizeLocale="sr-Latn-RS");var localeForHtmlTag=locale.substring(0,2);"zh"===localeForHtmlTag&&(localeForHtmlTag="zh_Hans_CN"===locale?"zh-Hans":"zh-Hant"),$("html").attr("lang",localeForHtmlTag),lastRequiredLocale=locale;var i=0,f=[function(){$.fb("crs-log",{m:"Globalize culture checking and loading..."}),window.Globalize&&void 0===config.cultures[locale]&&config.Globalize&&config.Globalize.path?Globalize.cultures[GlobalizeLocale]?$fb.i18n.selectLocale(locale).then(function(){config.cultures[locale]=!0,f[++i]()}):$.fb("crs-utils-external",config.Globalize.path+"/cultures/globalize.culture."+GlobalizeLocale+".js",function(){$fb.i18n.selectLocale(locale).then(function(){config.cultures[locale]=!0;var defaultLocaleLoad=locale===config.defaultLocale&&0===_.size(config.translations[config.defaultLocale]);(locale===lastRequiredLocale||defaultLocaleLoad)&&f[++i]()})}):f[++i]()},function(){window.Globalize&&(Globalize.culture(GlobalizeLocale),!(Globalize.cultures[GlobalizeLocale].calendars.standard.name&&-1!==Globalize.cultures[GlobalizeLocale].calendars.standard.name.toLowerCase().indexOf("gregorian"))&&Globalize.cultures[GlobalizeLocale].calendars&&Globalize.cultures[GlobalizeLocale].calendars.Gregorian_Localized&&(Globalize.cultures[GlobalizeLocale].calendar=Globalize.cultures[GlobalizeLocale].calendars.Gregorian_Localized));f[++i]()},function(){if($.fb("crs-log",{m:"Application translations loading and application..."}),window["_i18n_locale_"+locale]){if($.fb("crs-log",{m:"i18n data loaded from window object"}),config.translations[locale]=$.extend(!0,config.translations[locale]||{},window["_i18n_locale_"+locale][locale]),locale!==lastRequiredLocale)return;f[++i]()}else if(config.translations[locale]&&config.translations[locale].Arrival)f[++i]();else{var currentGroup=$fb._state.quicksearch.group?$fb._state.quicksearch.group:null,properties=$fb._state.app.data.groups[currentGroup]?$fb._state.app.data.groups[currentGroup].properties:{};$.fb("crs-api-call",{data:{c:"i18n",locale:locale,group:currentGroup,properties:Object.keys(properties)},success:function(json){json&&"success"===json.status&&json.data&&json.data.i18n&&json.data.i18n[locale]?config.translations[locale]=$.extend(!0,config.translations[locale]||{},json.data.i18n[locale]):($.fb("crs-log",{l:"crit",m:"Error on loading the application translations for: "+locale}),$.fb("crs-log",{l:"crit",m:json})),locale===lastRequiredLocale&&f[++i]()},error:function(json){$.fb("crs-log",{l:"crit",m:"Error on loading the application translations for: "+locale}),$.fb("crs-log",{l:"crit",m:json}),locale===lastRequiredLocale&&f[++i]()}})}},function(){var property=$.fb("crs-utils-configure",{k:"property"});if(!property)return f[++i]();$.fb("crs-log",{m:"Loading translations for the property"}),$.fb("crs-locale-load-property",{property:property,locale:locale},function(){locale===lastRequiredLocale&&f[++i]()})},function(){$.fb("crs-utils-configure",{k:"locale",v:locale}),$.fb("crs-utils-configure",{k:"globalizeLocale",v:GlobalizeLocale}),f[++i]()},function(){$.fb("crs-log",{m:"Translations localization..."}),$.fb("crs-helper-process","translate"),f[++i]()},function(){$.fb("crs-log",{m:"Prices localization..."}),$.fb("crs-helper-renderall"),f[++i]()},function(){$.fb("crs-log",{m:"Dates localization..."}),$.fb("crs-helper-process","date"),f[++i]()},function(){$.fb("crs-log",{m:"TrustScore localization..."}),$.fb("crs-helper-trustscore"),f[++i]()},function(){$.fb("crs-log",{m:"TripAdvisor localization..."}),$.fb("crs-helper-tripadvisor"),f[++i]()},function(){$fb._triggerEvent("crs-locale-changed"),"function"==typeof event.callback&&event.callback()}];f[i]()},culture:function(event){$.fb("crs-checkEvent",event);var GlobalizeLocale=$.fb("crs-utils-configure",{k:"globalizeLocale"});return $.fb("crs-assert",{c:void 0!==GlobalizeLocale,m:"Locale definition missing"}),window.Globalize?Globalize.cultures[GlobalizeLocale]:null},_:{loadPropertyTranslations:function(locale,property){return new Promise(function(resolve,reject){if(window["_translations_"+property+"_"+locale])return resolve(api._.flatten(window["_translations_"+property+"_"+locale],property+":"));$.fb("crs-api-call",{data:{c:"translate",locale:locale,property:property},success:function(json){return json&&"success"===json.status&&json.data&&json.data[locale]?resolve(api._.flatten(json.data[locale],property+":")):reject(new Error("Error on loading the list of property translations"))},error:function(){return reject(new Error("Error on loading the list of property translations"))}})})},savePropertyTranslations:function(locale,property,translationsToSave){config.translations[locale]=$.extend(!0,config.translations[locale]||{},translationsToSave),loadedProperties[locale]||(loadedProperties[locale]={}),loadedProperties[locale][property]=1},flatten:function(object,prefix){prefix=prefix||"";var result={};for(var i in object)"string"==typeof object[i]?result[prefix+i]=object[i]:result=$.extend(result,api._.flatten(object[i],prefix+i+":"));return result},ensureGlobalizeIsLoaded:function(callback){if(window.Globalize||!config.Globalize||!config.Globalize.path)return callback();$.fb("crs-log",{m:"Globalize loading"}),$.fb("crs-utils-external",config.Globalize.path+"/globalize.js",function(){$.fb("crs-log",{m:"Globalize library project: https://github.com/jquery/globalize"}),callback()})}}},_default={loaded:function(){return loaded},configure:function(event){$.fb("crs.checkEvent",event);var args=event.args||{},value=void 0!==args.value?args.value:void 0!==args.v?args.v:void 0,key=args.key||args.k||void 0;return void 0===value?config[key]:(config[key]=value,!0)}};for(var i in window[NS].crs.utils.locale=$.extend(!0,void 0!==window[NS].crs.utils.locale?window[NS].crs.utils.locale:{},$.extend(!0,_default,api)),window[NS].crs.utils.locale)if("function"==typeof window[NS].crs.utils.locale[i]){var name=NS+"-crs-utils-"+module+"-"+i+" crs-"+module+"-"+i;$(document).off(name).on(name,window[NS].crs.utils.locale[i])}}(window.jQuery,window.$fb.underscore),function($){var NS="fastbooking",loaded=!1,config={htmlClean:{src:"/lib/jquery/jquery.htmlClean.min.js"},html:{format:!0,removeTags:["strong","font","code","pre","img"]}},api={init:function(event){$.fb("crs-checkEvent",event),$.fb("crs-log",{message:"clean module initialization"}),$.fb("crs-log",{message:"Updating crs.utils.clean configuration."}),config=$.extend(!0,config,event.args||{}),$.fb("crs-log",{m:"Configuration loaded:"}),$.fb("crs-log",{m:config});var step=0,f=[function(){window.$&&void 0===$.htmlClean&&config.htmlClean&&config.htmlClean.src?($.fb("crs-log",{m:"jQuery htmlClean library loading"}),$.fb("crs-utils-external",config.htmlClean.src,function(){$.fb("crs-log",{m:"jQuery htmlClean library loaded: https://code.google.com/p/jquery-clean/"}),f[++step]()})):f[++step]()},function(){loaded=!0,"function"==typeof event.callback&&event.callback()}];f[step]()},html:function(event){$.fb("crs-checkEvent",event);var html=event.args||"";return window.$&&void 0!==$.htmlClean&&(html=$.htmlClean(html,config.html)),html}},_default={loaded:function(){return loaded},configure:function(event){$.fb("crs.checkEvent",event);var args=event.args||{},value=void 0!==args.value?args.value:void 0!==args.v?args.v:void 0,key=args.key||args.k||void 0;return void 0===value?config[key]:(config[key]=value,!0)}};for(var i in window[NS].crs.utils.clean=$.extend(!0,void 0!==window[NS].crs.utils.clean?window[NS].crs.utils.clean:{},$.extend(!0,_default,api)),window[NS].crs.utils.clean)if("function"==typeof window[NS].crs.utils.clean[i]){var name=NS+"-crs-utils-clean-"+i+" crs-clean-"+i;$(document).off(name).on(name,window[NS].crs.utils.clean[i])}}(window.jQuery),function($){var NS="fastbooking",module="helper",loaded=!1,config={useCurrencySymbol:!0,pricePrecision:2,priceDiscount:0,currencies:{EUR:{label:"Euro",name:"ECC - Euro",rate:"1",symbol:"€"}},noPrecisionCurrencies:["CLP","ISK","JPY","KRW","IDR","VND"],scrollMargin:10,cdn:"mediastore.hotelcontent.net",formatMappingForGlobalize:{full:"D",short:"M"}};function getPhones(){return new Promise(function(resolve){$(document).one("fastbooking-crs-frontend-load-phones-done",function(){resolve($fb._state.app.data.phones)}),$fb._triggerEvent("fastbooking-crs-frontend-load-phones")})}var api={init:function(event){$.fb("crs-checkEvent",event),$.fb("crs-log",{message:"Helper module initialization"}),$.fb("crs-log",{message:"Updating crs.utils.helper configuration."}),config=$.extend(!0,config,event.args||{}),$.fb("crs-log",{m:"Configuration loaded:"}),$.fb("crs-log",{m:config}),new Promise(function(resolve,reject){if(window._currencies)return $.fb("crs-log",{m:"Currencies loaded from the window object"}),resolve(window._currencies);$.fb("crs-api-call",{data:{c:"list",list:"currencies"},success:function(json){if(json&&"success"===json.status&&json.data&&json.data.currencies)return $.fb("crs-log",{m:"Currencies list successfully loaded"}),resolve(json.data.currencies);reject(new Error("Error on loading the list of currencies: missing data in API response."))},error:function(json){reject(new Error("Error on loading the list of currencies "+json))}})}).then(function(currencies){config.currencies=currencies,$fb._state.app.data.currencies=currencies,$fb._triggerEvent("fastbooking-crs-frontend-currencies-done"),loaded=!0,"function"==typeof event.callback&&event.callback()}).catch(function(err){$.fb("crs-log",{l:"crit",m:err.message})})},change:function(event){$.fb("crs-checkEvent",event);var args=event.args||{},key=args.key,value=args.value;switch(key){case"currency":$.fb("crs-utils-configure",{k:"currency",v:value}),$.fb("crs-helper-renderall");break;case"locale":return void $.fb("crs-locale-set",value,event.callback);case"image":$.fb("crs-helper-process","image")}"function"==typeof event.callback&&event.callback()},parsedate:function(event){$.fb("crs-checkEvent",event);var input=(event.args||{}).date||new Date;if(input instanceof Date)return new Date(input.getTime());if(void 0===input.match||"function"!=typeof input.match)return new Date;var parts=input.match(/(\d+)/g);return parts?new Date(parts[0],parts[1]-1,parts[2]):new Date},date:function(event){$.fb("crs-checkEvent",event);var args=event.args||{};if(args instanceof jQuery){$.fb("crs-assert",{c:args.hasClass("fb-date"),m:"Helper date object given is not a correct date object"}),$.fb("crs-assert",{c:null!==args.attr("data-date"),m:"Helper date object does not have a data-date attribute"});var d=$.fb("crs-helper-date",{date:args.attr("data-date"),format:args.attr("data-format")});return args.html(d.html()),args}var date=args.date,humanFormat=args.format||"full";$.fb("crs-assert",{c:void 0!==date,m:'Helper date wrong parameter value: "'+date+'"'}),date instanceof Date||(date=$.fb("crs-helper-parsedate",{date:date})),$.fb("crs-assert",{c:!0!==isNaN(date.getTime()),m:'Helper date invalid: "'+date+'"'});var string=api._.formatDateString(date),$date=$('<span class="fb-date" data-date="'+string+'" data-format="'+humanFormat+'">'+string+"</span>");return void 0!==window.Globalize&&$date.text(Globalize.format(date,config.formatMappingForGlobalize[humanFormat])),$date},trustscore:function(event){$.fb("crs-checkEvent",event),void 0!==$fb.trustyouSeal&&$fb.trustyouSeal.updateSeal()},tripadvisor:function(event){$.fb("crs-checkEvent",event),$.fb("crs-log",{m:"TripAdvisor helper..."}),void 0!==$fb.tripAdvisor&&!0===$fb.tripAdvisor.isEnabled()&&$fb.tripAdvisor.updateFrame()},renderall:function(event){$.fb("crs-checkEvent",event),$(".fb-price").each(function(i,o){$.fb("crs-helper-renderprice",{price:$(o),ref:"process"})}),$(document).trigger("fastbooking-crs-helper-render-all-done")},renderprice:function(event){$.fb("crs-checkEvent",event);var price=event.args.price;if(price instanceof jQuery){$.fb("crs-assert",{c:price.hasClass("fb-price"),m:"Helper price object given is not a correct price object"}),$.fb("crs-assert",{c:null!==price.attr("data-price"),m:"Helper price object does not have a data-price attribute"});var d=$.fb("crs-helper-price",{originCurrency:price.attr("data-originCurrency"),price:price.attr("data-price"),originalPrice:price.attr("data-original-price"),currency:price.attr("data-currency"),displayedPrecision:price.attr("data-displayedPrecision"),useCurrencySymbol:price.attr("data-symbol"),alternate:price.attr("data-alternate")?JSON.parse(price.attr("data-alternate")):null,pricepoint:price.attr("data-pricepoint")?price.attr("data-pricepoint"):null});return price.html(d.html()),price}},phone:function(event){$.fb("crs-checkEvent",event);var args=event.args||{},phoneCountryCode=args.phoneCountryCode,phone=args.phone;return phoneCountryCode&&(phone="+"+phoneCountryCode+" "+phone),$fb._isMobile()?$("<a />",{class:"theme-link",href:"tel:"+phone.replace(/ /g,""),text:phone}):phone},email:function(event){$.fb("crs-checkEvent",event);var email=(event.args||{}).email;return $("<a />",{class:"theme-link",href:"mailto:"+email,text:email})},resolvePhone:function(event){var countryOrCountryCode=event.args&&event.args.countryOrCountryCode,phone=event.args&&event.args.phone,locale=event.args&&event.args.locale;return locale&&phone?Promise.resolve().then(function(){return"+"!==phone.substr(0,1)?[]:getPhones().then(function(phones){return Object.keys(phones).reduce(function(matchs,countryCode){var prefix="+"+phones[countryCode];return phone.substr(0,prefix.length)===prefix&&matchs.push(countryCode),matchs},[])})}).then(function(resolvedCountryCodes){return 1!==resolvedCountryCodes.length&&countryOrCountryCode?function(locale){return new Promise(function(resolve){var callback=function(){$fb._state.app.data.countries[locale]&&($(document).off("fastbooking-crs-frontend-load-countries-done",callback),resolve($fb._state.app.data.countries[locale]))};$(document).on("fastbooking-crs-frontend-load-countries-done",callback),$fb._triggerEvent("fastbooking-crs-frontend-load-countries",{locale:locale})})}(locale).then(function(countries){return countryOrCountryCode&&-1!==Object.keys(countries).indexOf(countryOrCountryCode)?countryOrCountryCode:Object.keys(countries).find(function(key){return countries[key]===countryOrCountryCode})}).then(function(countryCode){return countryCode?resolvedCountryCodes.concat([countryCode]):resolvedCountryCodes}):resolvedCountryCodes}).then(function(resolvedCountryCodes){var grouped=resolvedCountryCodes.reduce(function(grouped,countryCode){return grouped[countryCode]||(grouped[countryCode]=0),grouped[countryCode]++,grouped},{}),doubledCountryCode=Object.keys(grouped).find(function(countryCode){return 1<grouped[countryCode]}),resolvedCountryCode=null;return doubledCountryCode?resolvedCountryCode=doubledCountryCode:resolvedCountryCodes.length&&(resolvedCountryCode=resolvedCountryCodes[0]),0===resolvedCountryCodes.length?{code:resolvedCountryCode,phone:phone}:getPhones().then(function(phones){var resolvedPhone=resolvedCountryCodes.reduce(function(resolvedPhone,countryCode){var prefix="+"+phones[countryCode];return resolvedPhone.replace(prefix,"")},phone);return{code:resolvedCountryCode,phone:resolvedPhone,phoneCode:phones[resolvedCountryCode]}})}):Promise.reject(new Error("Expected args locale and phone"))},price:function(event){$.fb("crs-checkEvent",event);var args=event.args||0,getOnlyFloatValue=!!args.getOnlyFloatValue,price=args.price,alternate=args.alternate,originalPrice=args.originalPrice,pricepoint=args.pricepoint;price===originalPrice&&(originalPrice=null);var _config={originCurrency:args.originCurrency||"EUR",currency:args.currency||$.fb("crs-utils-configure",{k:"currency"}),displayedPrecision:args.displayedPrecision,useCurrencySymbol:args.useCurrencySymbol||config.useCurrencySymbol},currency=_config.currency||"EUR",originCurrency=_config.originCurrency||"EUR";$.fb("crs-assert",{c:void 0!==price,m:"Helper price must have an amount in euro as unique input parameter"}),$.fb("crs-assert",{c:void 0!==currency,m:"Helper price currency undefined"}),$.fb("crs-assert",{c:void 0!==originCurrency,m:"Helper price origin currency undefined"}),config.currencies[currency]||($.fb("crs-log",{l:"warn",m:"Helper price currency not loaded: fallback applied to euro (EUR)"}),currency="EUR"),config.currencies[originCurrency]||($.fb("crs-log",{l:"warn",m:"Helper price origin currency not loaded: fallback applied to euro (EUR)"}),originCurrency="EUR");var num,dec,amount=price=parseFloat(price),originalAmount=originalPrice=originalPrice&&parseFloat(originalPrice),c=config.currencies[currency];if("EUR"!==originCurrency){var oc=config.currencies[originCurrency];amount*=1/oc.rate,originalAmount&&(originalAmount*=1/oc.rate)}if(c&&(amount*=c.rate,originalAmount&&(originalAmount*=c.rate)),getOnlyFloatValue)return num=amount,dec=2,Math.round(parseFloat(num)*Math.pow(10,dec))/Math.pow(10,dec);function getNodeContent(amount,originalAmount,_config){var i18nOpts={};/\.0+$/.test(amount.toFixed($fb.i18n.getCurrencyNbDecimals(currency)))&&(i18nOpts.minimumFractionDigits=0),_config.displayedPrecision&&(i18nOpts.maximumFractionDigits=_config.displayedPrecision),_config.noPrecisionCurrency&&(i18nOpts.maximumFractionDigits=0);var currencySymbol=$fb.i18n.getCurrencySymbol(currency),priceDisplayed="<span>"+(_config.symbol?$fb.i18n.formatCustomCurrency(amount,_config.symbol,i18nOpts):$fb.i18n.formatCurrency(amount,currency,i18nOpts)).replace(currencySymbol,'<span class="fb-price-currency">'+currencySymbol+"</span>")+"</span>";return originalAmount?$("<span />").append($('<span class="fb-price-original-barred" />').append(getNodeContent(originalAmount,null,_config)),$('<span class="fb-price-normal" />').append(priceDisplayed)):priceDisplayed}var $elt=$("<span />",{class:"fb-price","data-price":price,"data-original-price":originalPrice,"data-symbol":_config.useCurrencySymbol,"data-alternate":JSON.stringify(alternate),"data-pricepoint":pricepoint,html:getNodeContent(amount,originalAmount,_config)});if(currency!==$.fb("crs-utils-configure",{k:"currency"})&&$elt.attr("data-currency",currency),"EUR"!==originCurrency&&$elt.attr("data-originCurrency",originCurrency),alternate){var alternateAmount=price/alternate.rate,alternateOriginalAmount=originalPrice&&originalPrice/alternate.rate,$alternate=$("<span />",{class:"fb-price-second"}).append("&nbsp;").append($.fb("crs-helper-translate",{key:"price-second-amount-or",fallback:""})).append("&nbsp;").append(getNodeContent(alternateAmount,alternateOriginalAmount,$.extend(!0,{},_config,alternate)));$elt.append($alternate)}if(pricepoint&&0<pricepoint){var $pricepoint=$("<span />",{class:"fb-price-point"});0===amount?($elt.empty(),$pricepoint.addClass("fb-price-points")):$pricepoint.append("&nbsp;+&nbsp;"),$pricepoint.append($fb.i18n.formatNumber(Number(pricepoint))).append("&nbsp;points"),$elt.append($pricepoint)}return $elt},translate:function(event){$.fb("crs-checkEvent",event);var args=event.args||{};if(args instanceof HTMLElement&&(args=$(args)),args instanceof jQuery){$.fb("crs-assert",{c:args.hasClass("fb-translate"),m:"Helper translate object given is not a correct translate object"}),$.fb("crs-assert",{c:null!==args.attr("data-key"),m:"Helper price object does not have a data-key attribute"});var d=$.fb("crs-helper-translate",{key:args.attr("data-key"),mode:args.attr("data-mode"),placeholders:args.attr("data-placeholders")?args.attr("data-placeholders"):void 0,fallback:args.attr("data-fallback")?args.attr("data-fallback"):void 0,disableHTMLClean:"true"===args.attr("data-disableHTMLClean"),noDefaultLanguageFallback:"true"===args.attr("data-noDefaultLanguageFallback")});switch(args.get(0).tagName.toLowerCase()){case"select":case"input":case"textarea":break;default:args.html(d.html())}return args.attr("placeholder",d.text()),args}var key=args.key||"";$.fb("crs-assert",{c:void 0!==key,m:"Helper translate key not given: "+key});var mode=void 0!==args.mode?parseInt(args.mode,10):-1,disableHTMLClean=!!args.disableHTMLClean&&args.disableHTMLClean,noDefaultLanguageFallback=!0===args.noDefaultLanguageFallback,placeholders=args.placeholders||[],fallback=args.fallback?args.fallback:"";if("string"==typeof placeholders)try{placeholders=JSON.parse(placeholders)}catch(e){}Array.isArray(placeholders)||(placeholders=[placeholders]);var translatedContent=null,locale=$.fb("crs-utils-configure",{k:"locale"}),defaultLocale=$.fb("crs-locale-configure",{k:"defaultLocale"}),translations=$.fb("crs-locale-configure",{k:"translations"});$.fb("crs-assert",{c:void 0!==locale,m:"Helper translate locale is undefined"}),$.fb("crs-assert",{c:void 0!==translations,m:"Helper translate translations not initialized"}),translations[locale]||(locale=defaultLocale,$.fb("crs-log",{l:"warn",m:"Helper translate default locale applied: "+locale}),$.fb("crs-assert",{c:void 0!==translations[locale],m:"Helper translate default locale missing"}));var applyMode=function(mode,key,locale){switch(mode){case-1:break;case 0:translations[locale][key+":none"]&&(translatedContent=translations[locale][key+":none"]);break;case 1:translations[locale][key+":single"]&&(translatedContent=translations[locale][key+":single"]);break;default:translations[locale][key+":several"]&&(translatedContent=translations[locale][key+":several"])}if(translatedContent||(translatedContent=translations[locale][key]),!translatedContent&&locale!==defaultLocale&&translations[defaultLocale]&&translations[defaultLocale][key]&&!noDefaultLanguageFallback&&(translatedContent=applyMode(mode,key,defaultLocale)),!translatedContent&&fallback&&(translatedContent=fallback),!translatedContent){var itIsACompositeKeyWeDontWantToDisplay=2<=key.split(":").length;translatedContent=itIsACompositeKeyWeDontWantToDisplay?"":key}return translatedContent};if(translatedContent=applyMode(mode,key,locale),args.disableHTMLClean||(translatedContent=translatedContent.replace(/\n/g,"<br />")),$.fb("crs-assert",{c:void 0!==translatedContent,m:"Helper translate key not successfully translated"}),$.fb("crs-clean-loaded")&&!args.disableHTMLClean&&(translatedContent=$.fb("crs-clean-html",translatedContent)),placeholders.length){for(var placeholdersReg=new RegExp("%[1-9][0-9]*\\$s","ig"),oldPlaceholdersReg=new RegExp("%s","g"),found=((translatedContent||"").match(placeholdersReg)||[]).filter(function(v,x,self){return x==self.indexOf(v)}),oldFound=(translatedContent||"").match(oldPlaceholdersReg)||[],nbTranslationPlaceholders=Math.max(found.length,oldFound.length),warn="",isValidPlaceholder=function(placeholder){return null!=placeholder&&(!("string"!=typeof placeholder&&!Number.isFinite(placeholder))||"object"==typeof placeholder&&(placeholder instanceof jQuery||placeholder instanceof HTMLElement))},j=0;j<placeholders.length;j++)isValidPlaceholder(placeholders[j])||(warn+="Undefined or false value sent for key {"+key+"}.                                 Value is replaced by empty string in placeholders array.\n",placeholders[j]="");if(placeholders.length>nbTranslationPlaceholders)warn+="\nToo much data sent for key : {"+key+"} \nFound "+nbTranslationPlaceholders+" replacements for "+placeholders.length+' placeholders.\nPlaceholders : [\n\t"'+placeholders.join('"\n\t"')+'"\n]\nTranslation : '+translatedContent+"\n",placeholders=placeholders.slice(0,nbTranslationPlaceholders),warn+=nbTranslationPlaceholders+" values removed from placeholders.\n";else if(placeholders.length<nbTranslationPlaceholders){var toRemove=[];if(warn+="\nNot enought data sent for key : {"+key+"} with mode {"+mode+"}\nFound "+nbTranslationPlaceholders+" replacements for "+placeholders.length+' placeholders\nPlaceholders : [\n\t"'+placeholders.join('"\n\t"')+'"\n]\nTranslation : '+translatedContent+"\n",placeholders.length){for(var l=placeholders.length+1;l<=found.length;l++)toRemove.push("%"+l+"$s");if(placeholders.length<oldFound.length){var nth=0;translatedContent=translatedContent.replace(/%s/g,function(match){return++nth>placeholders.length?"":match})}}else toRemove=found.concat(oldFound);for(var y=0;y<toRemove.length;y++){var reg=new RegExp(toRemove[y].replace(/[$]/g,"\\$&"),"g");translatedContent=translatedContent.replace(reg,"")}warn+=toRemove.length+" placeholders removed from translation string.\n"}warn.length&&$fb.warn(warn)}for(var i in placeholders){var placeholder=placeholders[i];try{var $placeholder=$(placeholder);$placeholder.length&&($placeholder.is(".fb-translate")&&$.fb("crs-helper-translate",$placeholder),$(".fb-translate",$placeholder).each(function(i,o){$.fb("crs-helper-translate",$(o))}),placeholder=$("<div/>").append($placeholder).html())}catch(e){}translatedContent=(translatedContent=translatedContent.replace(new RegExp("%"+(parseInt(i,10)+1)+"\\$s","ig"),placeholder)).replace("%s",placeholder)}var $elt=$("<span />",{class:"fb-translate","data-key":key,"data-mode":mode,"data-fallback":fallback,"data-disableHTMLClean":disableHTMLClean?"true":"false","data-noDefaultLanguageFallback":noDefaultLanguageFallback?"true":"false","data-placeholders":JSON.stringify(placeholders.map(function(placeholder){return placeholder instanceof HTMLElement?placeholder.outerHTML:placeholder instanceof $?placeholder.get(0).outerHTML:placeholder}))});return $elt.html(translatedContent),$elt.find("a").addClass("theme-link"),$elt},translateByAccommodationType:function(event){if($.fb("crs-checkEvent",event),0===Object.keys(event.args).length)return"";var defKey=event.args[Object.keys(event.args)[0]];if(!$fb._state.quicksearch.property||!$fb._state.app.data.properties)return defKey;var propertyType=$fb._state.app.data.properties[$fb._state.quicksearch.property];if(!propertyType)return"";switch(propertyType.type){case"Hotel":return defKey;case"Apartment":return-1===defKey.indexOf("room")?defKey+"-apartment":defKey.replace("room","apartment");default:return-1===defKey.indexOf("room")?defKey+"-accommodation":defKey.replace("room","accommodation")}},image:function(event){$.fb("crs-checkEvent",event);var args=event.args||{},src=args.src;$.fb("crs-assert",{c:void 0!==src,m:"Helper image src must be provided"});var width=args.width,height=args.height,scale=Boolean(args.scale),offsetx=args.offsetx||0,offsety=args.offsety||0,crop=Boolean(args.crop),center=args.center||!1,stopCrazyMode=Boolean(args.stopCrazyMode);"auto"===width&&(width=$(window).width()),"auto"===height&&(height=$(window).height());var _width=width,_height=height;crop||void 0===width||stopCrazyMode||(_width=32*Math.ceil(width/32)),crop||void 0===height||stopCrazyMode||(_height=32*Math.ceil(height/32));var isMediastore=Boolean(src.match(/mediastore/));return src=src.replace(/^https?:/g,"").replace("mediastore.staging","mediastore-staging").replace(/(seine|erie|thames|hudson|loire)\.fastbooking\.ch\//i,"$1.book-secure.com/"),config.cdn&&(src=src.replace(/^\/\/(mediastore[^/]+)/,"//"+config.cdn)),isMediastore&&(_width&&(src=src.replace(/(\.[a-z]+)$/i,"-w"+_width+"$1")),_height&&(src=src.replace(/(\.[a-z]+)$/i,"-h"+_height+"$1")),scale&&(src=src.replace(/(\.[a-z]+)$/i,"-scale$1")),crop&&(src=src.replace(/(\.[a-z]+)$/i,"-crop$1")),center&&(src=src.replace(/(\.[a-z]+)$/i,"-center$1")),0<offsetx&&(src=src.replace(/(\.[a-z]+)$/i,"-x"+offsetx+"$1")),0<offsety&&(src=src.replace(/(\.[a-z]+)$/i,"-y"+offsety+"$1"))),args.onlySrc?src:$("<img />",{src:src,css:{width:width,height:height}})},"modal-get":function(event){$.fb("crs-checkEvent",event);var args=event.args||{},close=$.fb("crs-helper-translate",{key:"modal-close"}).text(),$modal=$('<div class="modal fade" id="crs-modal" tabindex="-1" role="dialog" aria-labelledby="modal" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">&nbsp;</h4></div><div class="modal-body">&nbsp;</div><div class="modal-footer"><button type="button" class="btn theme-btn btn-default" data-dismiss="modal">'+close+"</button></div></div>\x3c!-- /.modal-content --\x3e</div>\x3c!-- /.modal-dialog --\x3e</div>");args.id&&$modal.attr("id",args.id),args.classes&&$modal.addClass(args.classes),void 0!==args.header&&$modal.find(".modal-header").html(args.header),void 0!==args.body&&(args.body instanceof jQuery||args.body instanceof HTMLElement?$modal.find(".modal-body").empty().append(args.body):$modal.find(".modal-body").html(args.body)),void 0!==args.footer&&$modal.find(".modal-footer").html(args.footer);var positionCss={};if("center"===args.position&&(positionCss={top:"50%",transform:"translateY(-50%)"}),"minimal"===args.template&&$modal.css({overflowY:"auto"}).children(".modal-dialog").css({margin:"auto",height:"100%"}).find(".modal-body").prepend($modal.find("button.close")).end().find(".modal-header, .modal-footer").remove().end().find(".modal-content").css(positionCss).end().end(),"confirm"===args.template){var $cancelBtn=$("<a />",{href:"javascript:void(0)","data-dismiss":"modal",css:{marginRight:"15px"}}).append($.fb("crs-helper-translate",{key:"cancel-button-text"})),$confirmBtn=$("<button />",{type:"button",class:"btn theme-btn btn-default"}).append($.fb("crs-helper-translate",{key:"label-yes"})).on("click",function(){args.onConfirm(),$modal.modal("hide")});$modal.css({overflowY:"auto"}).children(".modal-dialog").css({margin:"auto",height:"100%"}).find(".modal-content").css(positionCss).end().find(".modal-footer").empty().append($cancelBtn,$confirmBtn).end()}for(var i in args)"function"==typeof args[i]&&$modal.on(i,args[i]);return"function"==typeof args.onClosed&&$modal.on("hidden.bs.modal",args.onClosed),$modal},"modal-display":function(event){$.fb("crs-checkEvent",event),$(".modal").modal("hide");var $modal=$.fb("crs-helper-modal-get",event.args);return $("body").append($modal),$modal.modal("show"),$modal.on("hidden.bs.modal",function(){$(this).remove()}),$modal},scrollTo:function(event){$.fb("crs-checkEvent",event);var args=event.args||{};if(void 0===$(args.id))return!1;void 0===args.container&&(args.container="html, body");var offset=$(args.id).offset(),margin=parseInt($.fb("crs-utils-configure",{k:"scrollMargin"}),10);return args.offset&&(margin=parseInt(args.offset,10)),0<margin&&(offset.top-=margin),$.fb("crs-log",{l:"warn",m:"Moving UI to offset "+offset.top}),$(args.container).animate({scrollTop:Math.max(0,offset.top)}),!0},process:function(event){$.fb("crs-checkEvent",event);var type=event.args||"";"function"==typeof api[type]?$(".fb-"+type).each(function(i,o){$.fb("crs-helper-"+type,$(o))}):$.fb("crs-log",{l:"warn",m:"Unsupported object type: "+type})},hasFeature:function(event){$.fb("crs-checkEvent",event);var args=event.args||{},key=args.key,state=args.state,argument=args.argument,ifNotDefined=void 0!==args.ifNotDefined&&args.ifNotDefined;return window.$fb&&$fb._config&&$fb._config.features&&$fb._config.features[state]&&$fb._config.features[state][key]?!!new RegExp($fb._config.features.activate[key]).test(void 0!==argument?argument:""):ifNotDefined},displayPriceDetails:function(event){return $.fb("crs-checkEvent",event),!(!$fb._state.app.data.properties[$fb._state.quicksearch.property]||$fb._state.app.data.properties[$fb._state.quicksearch.property].configuration.hidePriceDetails)},getExclusiveBestRateMention:function(){return $fb._state.app&&$fb._state.app.data.properties&&$fb._state.app.data.properties[$fb._state.quicksearch.property]&&$fb._state.app.data.properties[$fb._state.quicksearch.property].configuration&&$fb._state.app.data.properties[$fb._state.quicksearch.property].configuration.exclusiveBestRate?$('<span class="col-xs-12 fb-dark-gray sub-title1"/>').append($.fb("crs-helper-translate",{key:"results-header-"+$fb._state.app.data.properties[$fb._state.quicksearch.property].type.toLowerCase()})):null},_:{formatDateString:function(date){var ad=date.getDate(),am=date.getMonth()+1;return date.getFullYear()+"-"+(am<=9?"0"+am:am)+"-"+(ad<=9?"0"+ad:ad)}}},_default={loaded:function(){return loaded},configure:function(event){$.fb("crs.checkEvent",event);var args=event.args||{},value=void 0!==args.value?args.value:void 0!==args.v?args.v:void 0,key=args.key||args.k||void 0;return void 0===value?config[key]:(config[key]=value,!0)}};for(var i in window[NS].crs.utils.helper=$.extend(!0,void 0!==window[NS].crs.utils.helper?window[NS].crs.utils.helper:{},$.extend(!0,_default,api)),window[NS].crs.utils.helper)if("function"==typeof window[NS].crs.utils.helper[i]){var name=NS+"-crs-utils-"+module+"-"+i+" crs-"+module+"-"+i;$(document).off(name).on(name,window[NS].crs.utils.helper[i])}}(window.jQuery),function($,_){var NS="fastbooking",module="tracking",loaded=!1,config={datalayer:{trackers:[]},gtm:{activated:!1},ga:{activated:!0,accounts:{}},fbtracker:{src:void 0}},api={init:function(event){$.fb("crs-checkEvent",event),$.fb("crs-log",{message:module+" module initialization"}),$.fb("crs-log",{message:"Updating crs.utils.tracking configuration."}),config=$.extend(!0,config,event.args||{}),$.fb("crs-log",{m:"Configuration loaded:"}),$.fb("crs-log",{m:config});var step=0,f=[function(){if(config.datalayer&&config.datalayer.activated&&config.datalayer.layer){$.fb("crs-log",{m:"Activation of the datalayer"});try{$.fb("crs-tracking-datalayer")}catch(e){$fb.error(e)}}if($.fb("crs-tracking-configGtm"),config.ga&&config.ga.activated&&(void 0===window.ga&&(i=window,s=document,o="script",r="ga",i.GoogleAnalyticsObject=r,i.ga=i.ga||function(){(i.ga.q=i.ga.q||[]).push(arguments)},i.ga.l=1*new Date,a=s.createElement(o),m=s.getElementsByTagName(o)[0],a.async=1,a.src="//www.google-analytics.com/analytics.js",m.parentNode.insertBefore(a,m)),void 0!==window.ga))for(var account in config.ga.accounts)$.fb("crs-log",{m:"Google Analytics account "+account+" creation (ga)."}),"object"==typeof config.ga.accounts[account]?ga("create",account,config.ga.accounts[account][0],config.ga.accounts[account][1]):ga("create",account,config.ga.accounts[account]);var i,s,o,r,a,m;config.fbtracker&&config.fbtracker.src&&window.top===window?$.fb("crs-utils-external",config.fbtracker.src,function(){void 0===window.fbtracker&&$.fb("crs-log",{l:"crit",m:"Error on loading Fastbooking tracker: "+config.fbtracker.src}),f[++step]()}):f[++step]()},function(){"results"!==$fb._state.app.step&&null!==$fb.storage.load("_statelastTrackStep")||$.fb("crs-tracking-send","/Utils/Init"),loaded=!0,"function"==typeof event.callback&&event.callback()}];f[step]()},configGtm:function(event){$.fb("crs-checkEvent",event);var property=event.args||{};if(config.gtm&&config.gtm.activated&&(config.gtm.containers||config.gtm.id)){var gtmId,dataLayerEnable=!1;property.tracking&&property.tracking.gtmId?(gtmId=property.tracking.gtmId,dataLayerEnable=!0):$fb._state.app.data.gtm&&$fb._state.app.data.gtm.gtmId&&""!==$fb._state.app.data.gtm.gtmId?(gtmId=$fb._state.app.data.gtm.gtmId,dataLayerEnable=!0):$fb._state.app.data.properties&&$fb._state.app.data.properties[$fb._state.quicksearch.property]&&$fb._state.app.data.properties[$fb._state.quicksearch.property].tracking&&$fb._state.app.data.properties[$fb._state.quicksearch.property].tracking.gtmId&&""!==$fb._state.app.data.properties[$fb._state.quicksearch.property].tracking.gtmId?(gtmId=$fb._state.app.data.properties[$fb._state.quicksearch.property].tracking.gtmId,dataLayerEnable=!0):config.gtm.containers?$.each(config.gtm.containers,function(i,o){gtmId=i,dataLayerEnable=o.datalayer}):config.gtm.id&&(gtmId=config.gtm.id,dataLayerEnable=config.gtm.datalayer),gtmId&&($("body").prepend('<noscript><iframe src="//www.googletagmanager.com/ns.html?id='+gtmId+"\" height=\"0\" width=\"0\" style=\"display:none;visibility:hidden\"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayerFB','"+gtmId+"');<\/script>"),dataLayerEnable&&config.datalayer.trackers.push({type:"gtm",id:gtmId}),$.fb("crs-tracking-gtm"))}},send:function(event){$.fb("crs-checkEvent",event);var args=event.args||{};if("object"!=typeof args&&(args=[args]),args=args||[],window.$fb&&$fb._state.quicksearch&&$fb._state.quicksearch.property?args[0]="/"+$fb._state.quicksearch.property+args[0]:args[0]="/no-hotel"+args[0],window.$fb&&$fb._state.quicksearch&&$fb._state.quicksearch.group?args[0]="/"+$fb._state.quicksearch.group+args[0]:args[0]="/individual-hotel"+args[0],args[0]="/Fastbooking"+args[0],config.ga&&config.ga.activated&&window.ga&&(args.unshift("pageview"),args.unshift("send"),ga.apply(null,args||[]),args.shift(),args.shift()),void 0!==window.fbtracker)try{return window.fbtracker.tracking.trackPage.apply(null,args||[])}catch(e){$.fb("crs-log",{l:"crit",m:"Error on tracking event"}),$.fb("crs-log",{l:"crit",m:e})}return!1},metric:function(event){$.fb("crs-checkEvent",event);var args=event.args||{};$.fb("crs-api-call",{data:$.extend(!0,{c:"metric"},args)}),window.ga&&ga("send","event",args.category,args.action,args.label,args.value)},ecommerce:function(event){$.fb("crs-checkEvent",event);var args=event.args||{},email=args.email,confirmation=args.confirmation;if($.fb("crs-assert",{c:void 0!==email,m:"E-commerce tracking information missing: email"}),$.fb("crs-assert",{c:void 0!==confirmation,m:"E-commerce tracking information missing: confirmation"}),void 0!==window.fbtracker&&window.$fb&&$fb.selection&&$fb.selection.getEcommerceData){var data=$fb.selection.getEcommerceData(confirmation);$.fb("crs-tracking-send",["FastBooking/Confirmation",data])}},"datalayer:gtm":function(event){$.fb("crs-checkEvent",event);var args=event.args||{},data=args.data,self=fastbooking.crs.utils.tracking;api._.getStep().then(function(label){var xs=args.o.options?args.o.options.filter(function(value){return"usePreviousStep"===value}):[];return _.isEmpty(xs)?label:api._.getStep(_.last(xs))}).then(function(label){var dl={event:args.o.eventName,category:args.o.step[0],action:args.o.step[1],label:label,actionId:args.o.step[2]};"Pageview"===args.o.eventName&&(dl.eventCallback=function(){$fb._triggerEvent("fastbooking-crs-frontend-pageview-"+dl.actionId+"-done")}),"Pageview"===args.o.eventName&&"confirm"===$fb._state.app.step&&"cancel"===$fb._state.app.previousStep&&(dl.actionId=dl.label="cancel-confirmation");var cleanDataLayer=[];void 0!==data&&$.each(data,function(i,o){"function"==typeof api._.dl[o]&&(dl[o]=api._.dl[o](),dl[o]instanceof Object&&dl[o].cleanDataLayer?(cleanDataLayer.push(dl[o].cleanDataLayer),delete dl[o].cleanDataLayer):dl[o]instanceof Array&&$.each(dl[o],function(j,p){p&&p.cleanDataLayer&&(cleanDataLayer.push(p.cleanDataLayer),dl[o].splice(j,1))}))}),dl.service&&dl.service.action&&"Details"!==dl.service.action&&(dl.actionId=dl.service.action+dl.actionId,delete $fb._state.lastModifiedService.action,delete dl.service.action),$.each(cleanDataLayer,function(i,o){window.dataLayerFB.push(o),self.gtmLog(o)}),window.dataLayerFB.push(dl),self.gtmLog(dl)})},gtmLog:function(entry){$.fb("crs-log",{messages:["GTM dataLayerFB push :",entry]})},datalayer:function(){function initLoyaltiesEvent(){$.fb("crs-tracking-datalayer:gtm",{o:{step:["Loyalty","MemberChangeStatus",$fb.loyalties.getCurrentLoyalty()&&$fb.loyalties.getCurrentLoyalty().isLogged()?"member":"public"],eventName:"Action Trackings"}}),$fb.loyalties.on("loyalty-login loyalty-logout",function(event){$fb._state.app.firePageview|=1<<$fb._state.app.stepId,$.fb("crs-tracking-datalayer:gtm",{o:{step:["Loyalty","MemberChangeStatus","loyalty-login"===event.type?"member":"public"],eventName:"Action Trackings"}})}),$fb.loyalties.on("loyalty-login-link-click loyalty-signup-link-click",function(event){$.fb("crs-tracking-datalayer:gtm",{o:{step:["Loyalty",event.type],eventName:"Action Trackings"}})})}$fb.loyalties?initLoyaltiesEvent():$(document).one("fastbooking-crs-frontend-loyalties-render",initLoyaltiesEvent);var walk=function($target,tags,callback){if(tags.step)return callback(tags),!1;$.each(tags,function(i,o){if($target.closest(i).length)return walk($target,o,callback),!1})};$.each(config.datalayer.layer,function(eventName,eventTags){"app"===eventName?$.each(eventTags,function(i,o){$(document).on(i+".datalayer",function(){setTimeout(function(){api._.getStep().then(function(label){var step=[o.step[0],o.step[1],label];$.each(config.datalayer.trackers,function(j,p){p.type&&$.fb("crs-tracking-datalayer:"+p.type,{step:step,data:o.data,id:p.id,o:o,p:p})})})},100)})}):$(window).off(eventName+".datalayer").on(eventName+".datalayer",function(windowEvent){var $target=$(windowEvent.target);walk($target,eventTags,function(o){setTimeout(function(){api._.getStep().then(function(label){var step=[o.step[0],o.step[1],label];$.each(config.datalayer.trackers,function(j,p){p.type&&$.fb("crs-tracking-datalayer:"+p.type,{step:step,data:o.data,id:p.id,o:o,p:p})})})},100)})})})},_:{convertPrices:function(prices,type,rate){if($fb._state.app.data.currencies)switch(type){case"rate":var rateCurrency;$fb._state.quicksearch.property&&$fb._state.app.data.rates&&$fb._state.app.data.rates[$fb._state.quicksearch.property]&&$fb._state.app.data.rates[$fb._state.quicksearch.property][rate]&&(rateCurrency=$fb._state.app.data.rates[$fb._state.quicksearch.property][rate].currency),rateCurrency&&$fb._state.app.data.currencies[rateCurrency]&&(prices.grossInRateCurrency=prices.gross*$fb._state.app.data.currencies[rateCurrency].rate,prices.netInRateCurrency=prices.net*$fb._state.app.data.currencies[rateCurrency].rate,prices.rateCurrency=rateCurrency);break;case"locale":$fb._state.app.currency&&$fb._state.app.data.currencies[$fb._state.app.currency]&&(prices.grossInLocaleCurrency=prices.gross*$fb._state.app.data.currencies[$fb._state.app.currency].rate,prices.netInLocaleCurrency=prices.net*$fb._state.app.data.currencies[$fb._state.app.currency].rate,prices.localeCurrency=$fb._state.app.currency)}return prices},getStep:function(label){return Promise.resolve().then(function(){var step=label&&-1===label.indexOf("step")?label:$fb._state.app.step;return-1!==step.indexOf("group")?"step0":-1!==step.indexOf("results")?$fb.results?$fb.results.getAvailabilityStatus().then(function(status){switch(status){case"available":return"step1";case"unavailable-partial":return"step1-partial-unavailability";case"unavailable-total":return"step1-total-unavailability";default:return"step1"}}):"step1":-1!==step.indexOf("extras")?"step2":-1!==step.indexOf("validate")?"step3":-1!==step.indexOf("confirm")&&"cancel"===$fb._state.app.previousStep?"cancel-confirmation":-1!==step.indexOf("confirm")?"step4":-1!==step.indexOf("cancel")?"cancel":label})},getVirtualPageUrl:function(step){var args=["/"+step];return window.$fb&&$fb._state.quicksearch&&$fb._state.quicksearch.property?args[0]="/"+$fb._state.quicksearch.property+args[0]:args[0]="/no-hotel"+args[0],window.$fb&&$fb._state.quicksearch&&$fb._state.quicksearch.group?args[0]="/"+$fb._state.quicksearch.group+args[0]:args[0]="/individual-hotel"+args[0],args[0]="/fastbooking"+args[0],args[0]},dl:{step:function(){return{}},isCheckout:function(){return!0},isPurchase:function(){return"cancel"!==$fb._state.app.previousStep||null},isRefund:function(){return"cancel"===$fb._state.app.previousStep||null},loyalty:function(){return $fb.loyalties&&$fb.loyalties.getCurrentLoyalty()&&$fb.loyalties.getCurrentLoyalty().isLogged()?{memberEmail:$fb.loyalties.getCurrentLoyalty().getMember().email}:{}},quicksearch:function(){function getLegacyFormat(legacyKey,key){return $fb._state.quicksearch.occupancy.reduce(function(reduced,room,index){return reduced[legacyKey+(index+1)]=room[key],reduced},{})}return{adults:getLegacyFormat("adults","nbAdults"),arrival:$fb._state.quicksearch.arrival,children:getLegacyFormat("children","nbChildren"),childrenAges:getLegacyFormat("childrenAges","childrenAges"),departure:$fb._state.quicksearch.departure,nights:moment($fb._state.quicksearch.departure).diff($fb._state.quicksearch.arrival,"d"),property:$fb._state.quicksearch.property,rooms:$fb._state.quicksearch.occupancy.length,cleanDataLayer:{quicksearch:null}}},currencies:function(){return $fb._state.app.data.currencies},display:function(){var data={};return data.currency=$fb._state.app.currency,data.locale=$fb._state.app.locale,data},properties:function(){var data=[];for(var hid in $fb._state.app.data.groups[$fb._state.quicksearch.group].properties)data.push($fb._state.app.data.groups[$fb._state.quicksearch.group].properties[hid]);return data},property:function(){try{var property,data={};if($fb._state.quicksearch.property&&(data.hid=$fb._state.quicksearch.property,(property=$fb._state.app.data.properties[data.hid])&&(data.title=property.title,data.location=property.location,property.configuration&&(data.currency=property.configuration.currency))),data.tags={},property&&property.tracking?(data.tags.gtmId=property.tracking.gtmId,data.tags.clientGaId=property.tracking.gaId,data.tags.clientGaClassic=void 0!==property.tracking.gaClassic&&property.tracking.gaClassic,data.tags.groupGaId=property.tracking.groupGaId,data.tags.websiteUrl=property.tracking.websiteUrl,data.tags.groupGaClassic=void 0!==property.tracking.groupGaClassic&&property.tracking.groupGaClassic,data.tags.webPackGaId=property.tracking.webpackGaId,data.tags.webPackGaClassic=void 0!==property.tracking.webpackGaClassic&&property.tracking.webpackGaClassic,data.tags.ghpEnable=void 0!==property.tracking.ghpEnable&&property.tracking.ghpEnable,data.tags.sojernV6Id=void 0!==property.tracking.sojernV6Id&&property.tracking.sojernV6Id,data.tags.veiId=property.tracking.veiId,data.tags.adRollAdvertisableId=property.tracking.adRollAdvertisableId,data.tags.adRollPixelId=property.tracking.adRollPixelId,data.tags.tripTeaseKey=property.tracking.tripTeaseKey,data.tags.tripTeaseClientKey=property.tracking.tripTeaseClientKey,data.tags.trustYou=void 0!==property.tracking.trustYou?{enabled:property.tracking.trustYou}:{enabled:!1},data.tags.theHotelsNetworkAccountKey=property.tracking.theHotelsNetworkAccountKey,data.tags.theHotelsNetworkHotelId=property.tracking.theHotelsNetworkHotelId,data.tags.theHotelsNetworkPropertyId=property.tracking.theHotelsNetworkPropertyId,data.tags.googleAdWordsConversionId=property.tracking.googleAdWordsConversionId,data.tags.googleAdWordsConversionLabel=property.tracking.googleAdWordsConversionLabel,data.tags.googleAdWordsRemarketingConversionId=property.tracking.googleAdWordsRemarketingConversionId,data.tags.googleAdWordsRemarketingConversionLabel=property.tracking.googleAdWordsRemarketingConversionLabel,data.tags.equaeroCustomerId=property.tracking.equaeroCustomerId,data.tags.facebookAdsId=property.tracking.facebookAdsId,data.tags.affiliredMerchantId=property.tracking.affiliredMerchantId,data.tags.hdbLiveChatId=property.tracking.hdbLiveChatId):$fb._state.app.data.gtm&&(data.tags.gtmId=$fb._state.app.data.gtm.gtmId?$fb._state.app.data.gtm.gtmId:void 0,data.tags.clientGaId=$fb._state.app.data.gtm.gaId?$fb._state.app.data.gtm.gaId:void 0,data.tags.clientGaClassic=$fb._state.app.data.gtm.gaClassic,data.tags.groupGaId=$fb._state.app.data.gtm.groupGaId?$fb._state.app.data.gtm.groupGaId:void 0,data.tags.websiteUrl=$fb._state.app.data.gtm.websiteUrl?$fb._state.app.data.gtm.websiteUrl:void 0,data.tags.groupGaClassic=$fb._state.app.data.gtm.groupGaClassic,data.tags.webPackGaId=$fb._state.app.data.gtm.webpackGaId?$fb._state.app.data.gtm.webpackGaId:void 0,data.tags.webPackGaClassic=$fb._state.app.data.gtm.webpackGaClassic,data.tags.ghpEnable=$fb._state.app.data.gtm.ghpEnable,data.tags.sojernV6Id=$fb._state.app.data.gtm.sojernV6Id,data.tags.veiId=$fb._state.app.data.gtm.veiId?$fb._state.app.data.gtm.veiId:void 0,data.tags.adRollAdvertisableId=$fb._state.app.data.gtm.adRollAdvertisableId?$fb._state.app.data.gtm.adRollAdvertisableId:void 0,data.tags.adRollPixelId=$fb._state.app.data.gtm.adRollPixelId?$fb._state.app.data.gtm.adRollPixelId:void 0,data.tags.tripTeaseKey=$fb._state.app.data.gtm.tripTeaseKey?$fb._state.app.data.gtm.tripTeaseKey:void 0,data.tags.tripTeaseClientKey=$fb._state.app.data.gtm.tripTeaseClientKey?$fb._state.app.data.gtm.tripTeaseClientKey:void 0,data.tags.trustYou=$fb._state.app.data.trustYou,data.tags.theHotelsNetworkAccountKey=$fb._state.app.data.gtm.theHotelsNetworkAccountKey?$fb._state.app.data.gtm.theHotelsNetworkAccountKey:void 0,data.tags.theHotelsNetworkHotelId=$fb._state.app.data.gtm.theHotelsNetworkHotelId?$fb._state.app.data.gtm.theHotelsNetworkHotelId:void 0,data.tags.theHotelsNetworkPropertyId=$fb._state.app.data.gtm.theHotelsNetworkPropertyId?$fb._state.app.data.gtm.theHotelsNetworkPropertyId:void 0,data.tags.googleAdWordsConversionId=$fb._state.app.data.gtm.googleAdWordsConversionId?$fb._state.app.data.gtm.googleAdWordsConversionId:void 0,data.tags.googleAdWordsConversionLabel=$fb._state.app.data.gtm.googleAdWordsConversionLabel?$fb._state.app.data.gtm.googleAdWordsConversionLabel:void 0,data.tags.googleAdWordsRemarketingConversionId=$fb._state.app.data.gtm.googleAdWordsRemarketingConversionId?$fb._state.app.data.gtm.googleAdWordsRemarketingConversionId:void 0,data.tags.googleAdWordsRemarketingConversionLabel=$fb._state.app.data.gtm.googleAdWordsRemarketingConversionLabel?$fb._state.app.data.gtm.googleAdWordsRemarketingConversionLabel:void 0,data.tags.equaeroCustomerId=$fb._state.app.data.gtm.equaeroCustomerId?$fb._state.app.data.gtm.equaeroCustomerId:void 0,data.tags.facebookAdsId=$fb._state.app.data.gtm.facebookAdsId?$fb._state.app.data.gtm.facebookAdsId:void 0,data.tags.affiliredMerchantId=$fb._state.app.data.gtm.affiliredMerchantId?$fb._state.app.data.gtm.affiliredMerchantId:void 0,data.tags.hdbLiveChatId=$fb._state.app.data.gtm.hdbLiveChatId?$fb._state.app.data.gtm.hdbLiveChatId:void 0),$fb._state.app.data.gtm.hotelCodes)try{data.hotelCodes=JSON.parse($fb._state.app.data.gtm.hotelCodes)}catch(e){data.hotelCodes={}}return data}catch(e){return{}}},room:function(){return $fb._state.lastInteractedAccomodationId?$fb._state.lastInteractedAccomodationId:"unknown"},context:function(){return{geolocationCountry:$fb._state.geolocationCountry}},runtimeContext:function(){return window.runtimeContext},buyerFormValidity:function(){return $fb._state.lastBuyerFormValidity?$fb._state.lastBuyerFormValidity:null},ccFormValidity:function(){return $fb._state.lastCCFormValidity?$fb._state.lastCCFormValidity:null},cancelFormValidity:function(){return $fb._state.lastCancelFormValidity?$fb._state.lastCancelFormValidity:null},apiError:function(){return{error:$fb._state.lastAPIError}},onlinePaymentError:function(){return{error:$fb._state.app.booking.paymentStatus}},packages:function(){var data=[],packages=$.extend(!0,{},$fb._state.app.data.quotation.packages);return $.each(packages,function(i){var pack=api._.dl.package(i);delete pack.cleanDataLayer,data.push(pack)}),data.push({cleanDataLayer:{packages:null}}),data},package:function(id){var data={},terms={};if(void 0!==id)data=$.extend(!0,[],$fb._state.app.data.quotation.packages[id]),$fb._state.app.data.quotation.terms&&(terms=$.extend(!0,{},$fb._state.app.data.quotation.terms[id]));else{if(!$fb._state.lastModifiedPackage||!$fb._state.lastModifiedPackage.package)return{};data=$.extend(!0,[],$fb._state.lastModifiedPackage.package),terms=$.extend(!0,{},$fb._state.lastModifiedPackage.terms),id=data[0].pack}var price={gross:0,net:0},priceInLocaleCurrency={gross:0,net:0},priceInRateCurrency={gross:0,net:0},dataToKeep=["property","product","type","rate","price","currency"];return $.each(data,function(j,p){data[j].price={gross:p.prices.gross,net:p.prices.net},data[j].price=api._.convertPrices(data[j].price,"locale"),data[j].price=api._.convertPrices(data[j].price,"rate",p.rate),data[j].price.grossInLocaleCurrency&&data[j].price.netInLocaleCurrency&&(priceInLocaleCurrency.gross+=data[j].price.grossInLocaleCurrency,priceInLocaleCurrency.net+=data[j].price.netInLocaleCurrency),data[j].price.grossInRateCurrency&&data[j].price.netInRateCurrency&&(priceInRateCurrency.gross+=data[j].price.grossInRateCurrency,priceInRateCurrency.net+=data[j].price.netInRateCurrency),price.gross+=p.prices.gross,price.net+=p.prices.net,$.each(p,function(i){-1===dataToKeep.indexOf(i)&&delete data[j][i]}),data[j].id=p.property+"::"+p.rate+"::"+p.type+"::"+p.product}),{products:data,price:price,priceInLocaleCurrency:priceInLocaleCurrency,priceInRateCurrency:priceInRateCurrency,terms:terms,position:parseInt(id.replace("pack-1",""),10),cleanDataLayer:{package:null}}},services:function(){var data=[];if($fb.extras._data&&$fb.extras._data.extras&&null!==$fb.extras._data.extras&&0<$fb.extras._data.extras.length){var services=$.extend(!0,{},$fb.extras._data.extras);$.each(services,function(i,o){var service=api._.dl.service(o);delete service.cleanDataLayer,service.position=parseInt(i)+1,data.push(service)}),data.push({cleanDataLayer:{services:null}})}return data},service:function(service){var data={};data=void 0!==service?$.extend(!0,{},service):$.extend(!0,{},$fb._state.lastModifiedService);var dataToKeep=["property","product","type","rate","price","currency","action"];return data.price={gross:data.prices.gross,net:data.prices.net},data.price=api._.convertPrices(data.price,"locale"),data.price=api._.convertPrices(data.price,"rate",data.rate),$.each(data,function(i){-1===dataToKeep.indexOf(i)&&delete data[i]}),data.id=data.property+"::"+data.rate+"::"+data.type+"::"+data.product,data.cleanDataLayer={service:null},data},selection:function(){var data;return"confirm"===$fb._state.app.step?(data=$.extend(!0,{},$fb._state.app.booking.selection)).confirmation=$fb._state.app.booking.confirmation:(data=$.extend(!0,{},$fb.selection.get()),$.each(data.packages,function(id,pack){$.each(pack.package,function(id,pack){pack.prices=api._.convertPrices(pack.prices,"locale"),pack.prices=api._.convertPrices(pack.prices,"rate",pack.rate)})}),$.each(data.services,function(id,pack){$.each(pack.service,function(id,pack){pack.prices=api._.convertPrices(pack.prices,"locale"),pack.prices=api._.convertPrices(pack.prices,"rate",pack.rate)})}),data.cleanDataLayer={selection:{packages:null,services:null}}),data},booking:function(){var booking={};if(booking.confirmation=$fb._state.app.booking.confirmation,$fb._state.app.booking.selection&&$fb._state.app.booking.selection.buyer?booking.buyer=$fb._state.app.booking.selection.buyer:$fb.confirmrecap._state.booking&&$fb.confirmrecap._state.booking.buyer&&(booking.buyer=$fb.confirmrecap._state.booking.buyer),$fb._state.app.data.bookings&&$fb._state.app.data.bookings[$fb._state.app.booking.confirmation]){booking.buyer=$fb._state.app.data.bookings[$fb._state.app.booking.confirmation].buyer,booking.property=$fb._state.app.data.bookings[$fb._state.app.booking.confirmation].property,booking.totalPrice=$fb._state.app.data.bookings[$fb._state.app.booking.confirmation].totalPrice,booking.totalTaxes=$fb._state.app.data.bookings[$fb._state.app.booking.confirmation].totalTaxes,booking.accessCode=$fb._state.app.data.bookings[$fb._state.app.booking.confirmation].accessCode,booking.currency=$fb._state.app.data.bookings[$fb._state.app.booking.confirmation].currency,booking.checkin=$fb._state.app.data.bookings[$fb._state.app.booking.confirmation].firstArrivalDate,booking.checkout=$fb._state.app.data.bookings[$fb._state.app.booking.confirmation].lastDepartureDate,booking.nights=moment(booking.checkout).diff(moment(booking.checkin),"days"),booking.rate=$fb._state.app.data.bookings[$fb._state.app.booking.confirmation].rate,booking.totalAdult=0,booking.totalChild=0,booking.accommodations=_.map($fb._state.app.data.bookings[$fb._state.app.booking.confirmation].accommodations,function(accommodation){return booking.totalAdult+=accommodation.adults,booking.totalChild+=accommodation.children,accommodation.name});var package=$fb._state.app.data.bookings[$fb._state.app.booking.confirmation].details.packages[0],meal=package.meal;booking.mealType=meal?meal.product:void 0;var terms=package.terms;booking.guarantee=terms?terms.guarantee:void 0;var details=$.extend(!0,{},$fb._state.app.data.bookings[$fb._state.app.booking.confirmation].details);details.packages.forEach(function(packageToFill){var product=packageToFill.accommodation;packageToFill.accommodation={},packageToFill.accommodation.property=booking.property,packageToFill.accommodation.product=product,packageToFill.accommodation.type="accommodation",packageToFill.accommodation.adults=packageToFill.adults,packageToFill.accommodation.children=packageToFill.children,packageToFill.accommodation.currency=packageToFill.currency,packageToFill.accommodation.mealType=meal?meal.mealType:void 0,packageToFill.accommodation.rate=packageToFill.rate,packageToFill.accommodation.prices={},packageToFill.accommodation.prices.taxes=details.taxes,delete packageToFill.taxes}),booking.details=details}return booking.cleanDataLayer={booking:null},booking},upsell:function(){return{secondsStayedOnThePopup:moment().diff($fb.upsellRoom.popupDisplayTimestamp,"seconds")}}}}},_default={loaded:function(){return loaded},configure:function(event){$.fb("crs.checkEvent",event);var args=event.args||{},value=void 0!==args.value?args.value:void 0!==args.v?args.v:void 0,key=args.key||args.k||void 0;return void 0===value?config[key]:(config[key]=value,!0)}};for(var i in window[NS].crs.utils[module]=$.extend(!0,void 0!==window[NS].crs.utils[module]?window[NS].crs.utils[module]:{},$.extend(!0,_default,api)),window[NS].crs.utils[module])if("function"==typeof window[NS].crs.utils[module][i]){var name=NS+"-crs-utils-"+module+"-"+i+" crs-"+module+"-"+i;$(document).off(name).on(name,window[NS].crs.utils[module][i])}}(window.jQuery,window.$fb.underscore),function($){var NS="fastbooking",module="verifyHeight",loaded=!1,config={},api={init:function(event){$.fb("crs-checkEvent",event),$.fb("crs-log",{message:module+" module initialization"}),loaded=!0,"function"==typeof event.callback&&event.callback()},dataCollectAndGuarantee:function(){$(".fb-guarantee-container").length&&$(".fb-datacollect-container").length&&($(".fb-guarantee-container").css("height",""),$(".fb-datacollect-container").css("height",""),960<=window.innerWidth&&setTimeout(function(){var heightDC=$(".fb-datacollect-container").innerHeight(),heightGuarantee=$(".fb-guarantee-container").innerHeight(),height=Math.max(heightDC,heightGuarantee);$(".fb-guarantee-container").height(height),$(".fb-datacollect-container").height(height)},100))}},_default={loaded:function(){return loaded},configure:function(event){$.fb("crs.checkEvent",event);var args=event.args||{},value=void 0!==args.value?args.value:void 0!==args.v?args.v:void 0,key=args.key||args.k||void 0;return void 0===value?config[key]:(config[key]=value,!0)}};for(var i in window[NS].crs.utils[module]=$.extend(!0,void 0!==window[NS].crs.utils[module]?window[NS].crs.utils[module]:{},$.extend(!0,_default,api)),window[NS].crs.utils[module])if("function"==typeof window[NS].crs.utils[module][i]){var name=NS+"-crs-utils-"+module+"-"+i+" crs-"+module+"-"+i;$(document).off(name).on(name,window[NS].crs.utils[module][i])}}(window.jQuery),function($){var NS="fastbooking",countriesPhoneRules={AC:["247","[46]\\d{4}|[01589]\\d{5}"],AD:["376","[16]\\d{5,8}|[37-9]\\d{5}"],AE:["971","[2-79]\\d{7,8}|800\\d{2,9}"],AF:["93","[2-7]\\d{8}"],AG:["1","[2589]\\d{9}"],AI:["1","[2589]\\d{9}"],AL:["355","[2-57]\\d{7}|6\\d{8}|8\\d{5,7}|9\\d{5}"],AM:["374","[1-9]\\d{7}"],AO:["244","[29]\\d{8}"],AR:["54","11\\d{8}|[2368]\\d{9}|9\\d{10}"],AS:["1","[5689]\\d{9}"],AT:["43","[1-9]\\d{3,12}"],AU:["61","1\\d{4,9}|[2-578]\\d{8}"],AW:["297","[25-9]\\d{6}"],AX:["358","1\\d{5,11}|[35]\\d{5,9}|[27]\\d{4,9}|4\\d{5,10}|6\\d{7,9}|8\\d{6,9}"],AZ:["994","[1-9]\\d{8}"],BA:["387","[3-9]\\d{7,8}"],BB:["1","[2589]\\d{9}"],BD:["880","[2-79]\\d{5,9}|1\\d{9}|8[0-7]\\d{4,8}"],BE:["32","[1-9]\\d{7,8}"],BF:["226","[25-7]\\d{7}"],BG:["359","[23567]\\d{5,7}|[489]\\d{6,8}"],BH:["973","[136-9]\\d{7}"],BI:["257","[267]\\d{7}"],BJ:["229","[2689]\\d{7}|7\\d{3}"],BL:["590","[56]\\d{8}"],BM:["1","[4589]\\d{9}"],BN:["673","[2-578]\\d{6}"],BO:["591","[23467]\\d{7}"],BQ:["599","[347]\\d{6}"],BR:["55","[1-46-9]\\d{7,10}|5(?:[0-4]\\d{7,9}|5(?:[2-8]\\d{7}|9\\d{7,8}))"],BS:["1","[2589]\\d{9}"],BT:["975","[1-8]\\d{6,7}"],BW:["267","[2-79]\\d{6,7}"],BY:["375","[1-4]\\d{8}|800\\d{3,7}|[89]\\d{9,10}"],BZ:["501","[2-8]\\d{6}|0\\d{10}"],CA:["1","[2-9]\\d{9}|3\\d{6}"],CC:["61","[1458]\\d{5,9}"],CD:["243","[2-6]\\d{6}|[18]\\d{6,8}|9\\d{8}"],CF:["236","[278]\\d{7}"],CG:["242","[028]\\d{8}"],CH:["41","[2-9]\\d{8}|860\\d{9}"],CI:["225","[02-8]\\d{7}"],CK:["682","[2-8]\\d{4}"],CL:["56","(?:[2-9]|600|123)\\d{7,8}"],CM:["237","[2368]\\d{7,8}"],CN:["86","[1-7]\\d{6,11}|8[0-357-9]\\d{6,9}|9\\d{7,10}"],CO:["57","(?:[13]\\d{0,3}|[24-8])\\d{7}"],CR:["506","[24-9]\\d{7,9}"],CU:["53","[2-57]\\d{5,7}"],CV:["238","[259]\\d{6}"],CW:["599","[169]\\d{6,7}"],CX:["61","[1458]\\d{5,9}"],CY:["357","[257-9]\\d{7}"],CZ:["420","[2-8]\\d{8}|9\\d{8,11}"],DE:["49","[1-35-9]\\d{3,14}|4(?:[0-8]\\d{4,12}|9(?:[0-37]\\d|4(?:[1-35-8]|4\\d?)|5\\d{1,2}|6[1-8]\\d?)\\d{2,8})"],DJ:["253","[27]\\d{7}"],DK:["45","[2-9]\\d{7}"],DM:["1","[57-9]\\d{9}"],DO:["1","[589]\\d{9}"],DZ:["213","(?:[1-4]|[5-9]\\d)\\d{7}"],EC:["593","1\\d{9,10}|[2-8]\\d{7}|9\\d{8}"],EE:["372","1\\d{3,4}|[3-9]\\d{6,7}|800\\d{6,7}"],EG:["20","1\\d{4,9}|[2456]\\d{8}|3\\d{7}|[89]\\d{8,9}"],EH:["212","[5-9]\\d{8}"],ER:["291","[178]\\d{6}"],ES:["34","[5-9]\\d{8}"],ET:["251","[1-59]\\d{8}"],FI:["358","1\\d{4,11}|[2-9]\\d{4,10}"],FJ:["679","[36-9]\\d{6}|0\\d{10}"],FK:["500","[2-7]\\d{4}"],FM:["691","[39]\\d{6}"],FO:["298","[2-9]\\d{5}"],FR:["33","[1-9]\\d{8}"],GA:["241","0?\\d{7}"],GB:["44","\\d{7,10}"],GD:["1","[4589]\\d{9}"],GE:["995","[34578]\\d{8}"],GF:["594","[56]\\d{8}"],GG:["44","[135789]\\d{6,9}"],GH:["233","[235]\\d{8}|8\\d{7}"],GI:["350","[2568]\\d{7}"],GL:["299","[1-689]\\d{5}"],GM:["220","[2-9]\\d{6}"],GN:["224","[367]\\d{7,8}"],GP:["590","[56]\\d{8}"],GQ:["240","[23589]\\d{8}"],GR:["30","[26-9]\\d{9}"],GT:["502","[2-7]\\d{7}|1[89]\\d{9}"],GU:["1","[5689]\\d{9}"],GW:["245","(?:4(?:0\\d{5}|4\\d{7})|9\\d{8})"],GY:["592","[2-46-9]\\d{6}"],HK:["852","[235-7]\\d{7}|8\\d{7,8}|9\\d{4,10}"],HN:["504","[237-9]\\d{7}"],HR:["385","[1-7]\\d{5,8}|[89]\\d{6,8}"],HT:["509","[2-489]\\d{7}"],HU:["36","[1-9]\\d{7,8}"],ID:["62","(?:[1-79]\\d{6,10}|8\\d{7,11})"],IE:["353","[124-9]\\d{6,9}"],IL:["972","1\\d{6,11}|[2-589]\\d{3}(?:\\d{3,6})?|6\\d{3}|7\\d{6,9}"],IM:["44","[135789]\\d{6,9}"],IN:["91","008\\d{9}|1\\d{7,12}|[2-9]\\d{9,10}"],IO:["246","3\\d{6}"],IQ:["964","[1-7]\\d{7,9}"],IR:["98","[1-8]\\d{9}|9(?:[0-4]\\d{8}|9\\d{2,8})"],IS:["354","[4-9]\\d{6}|38\\d{7}"],IT:["39","[01589]\\d{5,10}|3(?:[12457-9]\\d{8}|[36]\\d{7,9})"],JE:["44","[135789]\\d{6,9}"],JM:["1","[589]\\d{9}"],JO:["962","[235-9]\\d{7,8}"],JP:["81","[1-9]\\d{8,9}|00(?:[36]\\d{7,14}|7\\d{5,7}|8\\d{7})"],KE:["254","20\\d{6,7}|[4-9]\\d{6,9}"],KG:["996","[235-8]\\d{8,9}"],KH:["855","[1-9]\\d{7,9}"],KI:["686","[2458]\\d{4}|3\\d{4,7}|7\\d{7}"],KM:["269","[3478]\\d{6}"],KN:["1","[589]\\d{9}"],KP:["850","1\\d{9}|[28]\\d{7}"],KR:["82","007\\d{9,11}|[1-7]\\d{3,9}|8\\d{8}"],KW:["965","[12569]\\d{6,7}"],KY:["1","[3589]\\d{9}"],KZ:["7","(?:33\\d|7\\d{2}|80[09])\\d{7}"],LA:["856","[2-8]\\d{7,9}"],LB:["961","[13-9]\\d{6,7}"],LC:["1","[5789]\\d{9}"],LI:["423","6\\d{8}|[23789]\\d{6}"],LK:["94","[1-9]\\d{8}"],LR:["231","2\\d{7,8}|[378]\\d{8}|4\\d{6}|5\\d{6,8}"],LS:["266","[2568]\\d{7}"],LT:["370","[3-9]\\d{7}"],LU:["352","[24-9]\\d{3,10}|3(?:[0-46-9]\\d{2,9}|5[013-9]\\d{1,8})"],LV:["371","[2689]\\d{7}"],LY:["218","[25679]\\d{8}"],MA:["212","[5-9]\\d{8}"],MC:["377","[34689]\\d{7,8}"],MD:["373","[235-9]\\d{7}"],ME:["382","[2-9]\\d{7,8}"],MF:["590","[56]\\d{8}"],MG:["261","[23]\\d{8}"],MH:["692","[2-6]\\d{6}"],MK:["389","[2-578]\\d{7}"],ML:["223","[246-9]\\d{7}"],MM:["95","[1478]\\d{5,7}|[256]\\d{5,8}|9(?:[279]\\d{0,2}|[58]|[34]\\d{1,2}|6\\d?)\\d{6}"],MN:["976","[12]\\d{7,9}|[57-9]\\d{7}"],MO:["853","[268]\\d{7}"],MP:["1","[5689]\\d{9}"],MQ:["596","[56]\\d{8}"],MR:["222","[2-48]\\d{7}"],MS:["1","[5689]\\d{9}"],MT:["356","[2357-9]\\d{7}"],MU:["230","[2-9]\\d{6,7}"],MV:["960","[346-8]\\d{6,9}|9(?:00\\d{7}|\\d{6})"],MW:["265","(?:1(?:\\d{2})?|[2789]\\d{2})\\d{6}"],MX:["52","[1-9]\\d{9,10}"],MY:["60","[13-9]\\d{7,9}"],MZ:["258","[28]\\d{7,8}"],NA:["264","[68]\\d{7,8}"],NC:["687","[2-57-9]\\d{5}"],NE:["227","[0289]\\d{7}"],NF:["672","[13]\\d{5}"],NG:["234","[1-6]\\d{5,8}|9\\d{5,9}|[78]\\d{5,13}"],NI:["505","[12578]\\d{7}"],NL:["31","1\\d{4,8}|[2-7]\\d{8}|[89]\\d{6,9}"],NO:["47","0\\d{4}|[2-9]\\d{7}"],NP:["977","[1-8]\\d{7}|9(?:[1-69]\\d{6,8}|7[2-6]\\d{5,7}|8\\d{8})"],NR:["674","[458]\\d{6}"],NU:["683","[1-5]\\d{3}"],NZ:["64","6[235-9]\\d{6}|[2-57-9]\\d{7,10}"],OM:["968","(?:5|[279]\\d)\\d{6}|800\\d{5,6}"],PA:["507","[1-9]\\d{6,7}"],PE:["51","[14-9]\\d{7,8}"],PF:["689","4\\d{5,7}|8\\d{7}"],PG:["675","[1-9]\\d{6,7}"],PH:["63","2\\d{5,7}|[3-9]\\d{7,9}|1800\\d{7,9}"],PK:["92","1\\d{8}|[2-8]\\d{5,11}|9(?:[013-9]\\d{4,9}|2\\d(?:111\\d{6}|\\d{3,7}))"],PL:["48","[12]\\d{6,8}|[3-57-9]\\d{8}|6\\d{5,8}"],PM:["508","[45]\\d{5}"],PR:["1","[5789]\\d{9}"],PS:["970","[24589]\\d{7,8}|1(?:[78]\\d{8}|[49]\\d{2,3})"],PT:["351","[2-46-9]\\d{8}"],PW:["680","[2-8]\\d{6}"],PY:["595","5[0-5]\\d{4,7}|[2-46-9]\\d{5,8}"],QA:["974","[2-8]\\d{6,7}"],RE:["262","[268]\\d{8}"],RO:["40","[23]\\d{5,8}|[7-9]\\d{8}"],RS:["381","[126-9]\\d{4,11}|3(?:[0-79]\\d{3,10}|8[2-9]\\d{2,9})"],RU:["7","[3489]\\d{9}"],RW:["250","[027-9]\\d{7,8}"],SA:["966","1\\d{7,8}|(?:[2-467]|92)\\d{7}|5\\d{8}|8\\d{9}"],SB:["677","[1-9]\\d{4,6}"],SC:["248","[24689]\\d{5,6}"],SD:["249","[19]\\d{8}"],SE:["46","[1-35-9]\\d{5,11}|4\\d{6,8}"],SG:["65","[36]\\d{7}|[17-9]\\d{7,10}"],SH:["290","[256]\\d{4}"],SI:["386","[1-7]\\d{6,7}|[89]\\d{4,7}"],SJ:["47","0\\d{4}|[45789]\\d{7}"],SK:["421","(?:[2-68]\\d{5,8}|9\\d{6,8})"],SL:["232","[2-9]\\d{7}"],SM:["378","[05-7]\\d{7,9}"],SN:["221","[3789]\\d{8}"],SO:["252","[1-9]\\d{5,8}"],SR:["597","[2-8]\\d{5,6}"],SS:["211","[19]\\d{8}"],ST:["239","[29]\\d{6}"],SV:["503","[267]\\d{7}|[89]\\d{6}(?:\\d{4})?"],SX:["1","[5789]\\d{9}"],SY:["963","[1-59]\\d{7,8}"],SZ:["268","[027]\\d{7}"],TA:["290","8\\d{3}"],TC:["1","[5689]\\d{9}"],TD:["235","[2679]\\d{7}"],TG:["228","[29]\\d{7}"],TH:["66","[2-9]\\d{7,8}|1\\d{3}(?:\\d{5,6})?"],TJ:["992","[3-57-9]\\d{8}"],TK:["690","[2-47]\\d{3,6}"],TL:["670","[2-489]\\d{6}|7\\d{6,7}"],TM:["993","[1-6]\\d{7}"],TN:["216","[2-57-9]\\d{7}"],TO:["676","[02-8]\\d{4,6}"],TR:["90","[2-589]\\d{9}|444\\d{4}"],TT:["1","[589]\\d{9}"],TV:["688","[279]\\d{4,6}"],TW:["886","2\\d{6,8}|[3-689]\\d{7,8}|7\\d{7,9}"],TZ:["255","\\d{9}"],UA:["380","[3-9]\\d{8}"],UG:["256","\\d{9}"],US:["1","[2-9]\\d{9}"],UY:["598","[2489]\\d{6,7}"],UZ:["998","[679]\\d{8}"],VA:["39","(?:0(?:878\\d{5}|6698\\d{5})|[1589]\\d{5,10}|3(?:[12457-9]\\d{8}|[36]\\d{7,9}))"],VC:["1","[5789]\\d{9}"],VE:["58","[24589]\\d{9}"],VG:["1","[2589]\\d{9}"],VI:["1","[3589]\\d{9}"],VN:["84","[167]\\d{6,9}|[2-59]\\d{7,9}|8\\d{6,8}"],VU:["678","[2-57-9]\\d{4,6}"],WF:["681","[4-8]\\d{5}"],WS:["685","[2-8]\\d{4,6}"],YE:["967","[1-7]\\d{6,8}"],YT:["262","[268]\\d{8}"],ZA:["27","[1-79]\\d{8}|8\\d{4,8}"],ZM:["260","[289]\\d{8}"],ZW:["263","2(?:[012457-9]\\d{3,8}|6(?:[14]\\d{7}|\\d{4}))|[13-79]\\d{4,9}|8[06]\\d{8}"]},module="validate",loaded=!1;function validateCheckinTime(time){var noneOpt=$.fb("crs-helper-translate",{key:"chekin-time-none-opt"})[0].outerText;return new RegExp("^([0-2][0-9]:[0-5][0-9] ?(A|P)?M?)|("+noneOpt+")$").test(time)}function validateRegexChar(value){if(!value)return!0;return/^[\r\n\t\x20-\xFF]*$/.test(value)}var config={src:"//ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.min.js",binding:{"#fb-datacollect form":{rules:{"buyer-given-name-onlylatin":{required:!0,nameCheck:{}},"buyer-family-name-onlylatin":{required:!0,nameCheck:{}},"buyer-given-name":{required:!0},"buyer-family-name":{required:!0},"payer-given-name-onlylatin":{required:!0,nameCheck:{}},"payer-family-name-onlylatin":{required:!0,nameCheck:{}},"payer-given-name":{required:!0},"payer-family-name":{required:!0},"buyer-email":{required:!0,email:!0},"buyer-phone":{required:!0,phone:!0}},messages:{"buyer-given-name-onlylatin":"validation-error-buyer-firstname-onlylatin","buyer-family-name-onlylatin":"validation-error-buyer-lastname-onlylatin","buyer-given-name":"validation-error-buyer-firstname","buyer-family-name":"validation-error-buyer-lastname","payer-given-name-onlylatin":"validation-error-buyer-firstname-onlylatin","payer-family-name-onlylatin":"validation-error-buyer-lastname-onlylatin","payer-given-name":"validation-error-buyer-firstname","payer-family-name":"validation-error-buyer-lastname","buyer-email":"validation-error-buyer-email",email:"validation-error-buyer-email","buyer-phone":"validation-error-buyer-phone"}},"#fb-guarantee form":{rules:{"cc-number":{required:!0},"cc-csc":{required:!0},"cc-name":{required:!0},"cc-exp-month":{required:!0},"cc-exp-year":{required:!0}},messages:{"cc-number":"validation-error-guarantee-number","cc-csc":"validation-error-guarantee-cvv","cc-name":"validation-error-guarantee-holder","cc-exp-month":"validation-error-guarantee-month","cc-exp-year":"validation-error-guarantee-year"}},"#fb-paymenttypes form":{rules:{"online-payment-type":{required:!0}},messages:{"online-payment-type":"validation-error-online-payment-type"}},"#fb-recap form":{rules:{"fb-comment-block-onlylatin":{nameCheckForComment:!0},"checkin-time":{checkTime:!0},"checkin-time-mandatory":{checkTimeMandatory:!0}},message:{"check-terms":"validation-error-check-terms"}},"#fb-cancel-page form":{rules:{"cancel-number":{required:!0},"cancel-email":{required:!0,email:!0}},messages:{"cancel-number":"validation-error-cancel-number","cancel-email":"validation-error-buyer-email"}},"#fb-cancel-dialog form":{rules:{"cancel-number":{required:!0},"cancel-email":{required:!0,email:!0}},messages:{"cancel-number":"validation-error-cancel-number","cancel-email":"validation-error-buyer-email"}},"#extras-requests form":{rules:{"fb-comment-block-onlylatin":{nameCheckForComment:!0}}},"#fb-confirmbutton form":{rules:{"check-terms":{checkboxTerm:!0}}}},validators:{checkTimeMandatory:{callback:function(time){return!!time&&validateCheckinTime(time)},message:"validation-error-invalid-chekin-time"},checkTime:{callback:function(time){return""==time||validateCheckinTime(time)},message:"validation-error-invalid-chekin-time"},nameCheck:{callback:validateRegexChar},nameCheckForComment:{callback:validateRegexChar,message:"validation-error-comment-onlylatin"},phone:{callback:function(ph,element){if(null==ph)return!1;var stripped=ph.replace(/[\s()+-]|ext\.?/gi,""),buyerPhoneExtCountryCode=$("#buyer-phone-ext option:selected").data("country"),countryPhoneRule=countriesPhoneRules[buyerPhoneExtCountryCode]?new RegExp(countriesPhoneRules[buyerPhoneExtCountryCode][1],"i"):/\d{6,}/i;return this.optional(element)||countryPhoneRule.test(stripped)},message:"Please enter a valid phone number"},checkboxTerm:{callback:function(){return $("#fb-confirmbutton-TCCheckbox").hasClass("fb-checked")},message:"validation-error-check-terms"}}},api={init:function(event){$.fb("crs-checkEvent",event),$.fb("crs-log",{message:module+" module initialization"}),$.fb("crs-log",{message:"Updating crs.utils.validate configuration."}),config=$.extend(!0,config,event.args||{}),$.fb("crs-log",{m:"Configuration loaded:"}),$.fb("crs-log",{m:config});var step=0,f=[function(){void 0===$.validator?$.fb("crs-utils-external",config.src,function(){if(void 0===$.validator)$.fb("crs-log",{l:"warn",m:"jQuery validation library loading failed: "+config.src});else for(var validator in config.validators)$.validator.addMethod(validator,config.validators[validator].callback,config.validators[validator].message);f[++step]()}):f[++step]()},function(){loaded=!0,"function"==typeof event.callback&&event.callback()}];f[step]()},bind:function(){for(var selector in $.fb("crs-log",{m:"Bind validators: "}),$.fb("crs-log",{m:config.binding}),config.binding){$.fb("crs-log",{m:"Selector: "+selector+":not(.bound)"});var $form=$(selector+":not(.bound)");if($form.length){$.fb("crs-log",{m:"Bind on form: "+selector});var validation=$.extend(!0,config.binding[selector],{errorClass:"fb-error",showErrors:function(errorMap,errorList){this.defaultShowErrors(),$.each(errorList,function(i,o){var $error=$(o.element).next();if($error.length){var $translatedError=$.fb("crs-helper-translate",{key:$error.text()});$error.html($translatedError)}}),$.fb("crs-verifyHeight-dataCollectAndGuarantee")}});$form.addClass("bound"),"function"==typeof $form.validate&&$form.validate(validation)}}}},_default={loaded:function(){return loaded},configure:function(event){$.fb("crs.checkEvent",event);var args=event.args||{},value=void 0!==args.value?args.value:void 0!==args.v?args.v:void 0,key=args.key||args.k||void 0;return void 0===value?config[key]:(config[key]=value,!0)}};for(var i in window[NS].crs.utils[module]=$.extend(!0,void 0!==window[NS].crs.utils[module]?window[NS].crs.utils[module]:{},$.extend(!0,_default,api)),window[NS].crs.utils[module])if("function"==typeof window[NS].crs.utils[module][i]){var name=NS+"-crs-utils-"+module+"-"+i+" crs-"+module+"-"+i;$(document).off(name).on(name,window[NS].crs.utils[module][i])}}(window.jQuery),function($){var NS="fastbooking",loaded=!1,config={mapping:{}},api={init:function(event){$.fb("crs-checkEvent",event),$.fb("crs-log",{message:"error module initialization"}),$.fb("crs-log",{message:"Updating crs.utils.error configuration."}),config=$.extend(!0,config,event.args||{}),$.fb("crs-log",{m:"Configuration loaded:"}),$.fb("crs-log",{m:config}),loaded=!0,"function"==typeof event.callback&&event.callback()},labels:function(event){$.fb("crs-checkEvent",event);var args=event.args||{},codes=args.codes||args.code||args.c;$.fb("crs-assert",{c:codes,m:"Error module error: missing code error"});var ns=args.namespace||args.ns||"";"object"!=typeof codes&&(codes=[codes]);var _codes=window.$fb&&$fb._config&&$fb._config.errorsMapping?$fb._config.errorsMapping:{},labels={};for(var i in codes)if(void 0===labels[codes[i]]){if(ns&&_codes[ns]){var _label=api._.searchCode(codes[i],_codes[ns]);if(_label){labels[codes[i]]=_label;continue}}if(void 0===labels[codes[i]]){var errorLabel=api._.searchCode(codes[i],config.mapping);if(errorLabel){labels[codes[i]]=errorLabel;continue}}}return labels},display:function(event){$.fb("crs-checkEvent",event);var labels=api.labels(event),title=(event.args||{}).title||"error-application-error",$errors=$('<ul class="fb-modal-errors-list"></ul>');for(var code in labels){var $error=$.fb("crs-helper-translate",{key:labels[code],fallback:"Error #"+code});$errors.append($('<li class="fb-modal-error-item"/>').append($error).append("&nbsp;("+code+")"))}var body=$("<div/>").append($errors).html();return 0==$("li",$errors).length&&(body=$.fb("crs-helper-translate",{key:"error-unexpected",fallback:"An unexpected error occured"})),$.fb("crs-helper-modal-display",{classes:"fb-modal-msg",header:$.fb("crs-helper-translate",{key:title,fallback:"Error"}),body:body}),!0},_:{searchCode:function(code,codes){var label=void 0;for(var j in codes)for(var k in codes[j])if(codes[j][k]instanceof RegExp&&codes[j][k].test(code)||code==codes[j][k]){label=j;break}return label}}},_default={loaded:function(){return loaded},configure:function(event){$.fb("crs.checkEvent",event);var args=event.args||{},value=void 0!==args.value?args.value:void 0!==args.v?args.v:void 0,key=args.key||args.k||void 0;return void 0===value?config[key]:(config[key]=value,!0)}};for(var i in window[NS].crs.utils.error=$.extend(!0,void 0!==window[NS].crs.utils.error?window[NS].crs.utils.error:{},$.extend(!0,_default,api)),window[NS].crs.utils.error)if("function"==typeof window[NS].crs.utils.error[i]){var name=NS+"-crs-utils-error-"+i+" crs-error-"+i;$(document).off(name).on(name,window[NS].crs.utils.error[i])}}(window.jQuery);